<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8" />
      <title>content</title>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    jax: ["input/TeX","output/HTML-CSS"],
    extensions: [],
    TeX: {
      extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
    },
    showMathMenu: false
  });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js">
</script>
      <style>.markdown-preview:not([data-use-github-style]) { padding: 2em; font-size: 1.2em; color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); overflow: auto; }
.markdown-preview:not([data-use-github-style]) > :first-child { margin-top: 0px; }
.markdown-preview:not([data-use-github-style]) h1, .markdown-preview:not([data-use-github-style]) h2, .markdown-preview:not([data-use-github-style]) h3, .markdown-preview:not([data-use-github-style]) h4, .markdown-preview:not([data-use-github-style]) h5, .markdown-preview:not([data-use-github-style]) h6 { line-height: 1.2; margin-top: 1.5em; margin-bottom: 0.5em; color: rgb(0, 0, 0); }
.markdown-preview:not([data-use-github-style]) h1 { font-size: 2.4em; font-weight: 300; }
.markdown-preview:not([data-use-github-style]) h2 { font-size: 1.8em; font-weight: 400; }
.markdown-preview:not([data-use-github-style]) h3 { font-size: 1.5em; font-weight: 500; }
.markdown-preview:not([data-use-github-style]) h4 { font-size: 1.2em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) h5 { font-size: 1.1em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) h6 { font-size: 1em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) strong { color: rgb(0, 0, 0); }
.markdown-preview:not([data-use-github-style]) del { color: rgb(94, 97, 110); }
.markdown-preview:not([data-use-github-style]) a, .markdown-preview:not([data-use-github-style]) a code { color: rgb(82, 111, 255); }
.markdown-preview:not([data-use-github-style]) img { max-width: 100%; }
.markdown-preview:not([data-use-github-style]) > p { margin-top: 0px; margin-bottom: 1.5em; }
.markdown-preview:not([data-use-github-style]) > ul, .markdown-preview:not([data-use-github-style]) > ol { margin-bottom: 1.5em; }
.markdown-preview:not([data-use-github-style]) blockquote { margin: 1.5em 0px; font-size: inherit; color: rgb(94, 97, 110); border-color: rgb(209, 209, 210); border-width: 4px; }
.markdown-preview:not([data-use-github-style]) hr { margin: 3em 0px; border-top: 2px dashed rgb(209, 209, 210); background: none; }
.markdown-preview:not([data-use-github-style]) table { margin: 1.5em 0px; }
.markdown-preview:not([data-use-github-style]) th { color: rgb(0, 0, 0); }
.markdown-preview:not([data-use-github-style]) th, .markdown-preview:not([data-use-github-style]) td { padding: 0.66em 1em; border: 1px solid rgb(209, 209, 210); }
.markdown-preview:not([data-use-github-style]) code { color: rgb(0, 0, 0); background-color: rgb(234, 234, 235); }
.markdown-preview:not([data-use-github-style]) pre.editor-colors { margin: 1.5em 0px; padding: 1em; font-size: 0.92em; border-radius: 3px; background-color: rgb(240, 240, 240); }
.markdown-preview:not([data-use-github-style]) kbd { color: rgb(0, 0, 0); border-width: 1px 1px 2px; border-style: solid; border-color: rgb(209, 209, 210) rgb(209, 209, 210) rgb(193, 193, 194); border-image: initial; background-color: rgb(234, 234, 235); }
.markdown-preview[data-use-github-style] { font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif; line-height: 1.6; word-wrap: break-word; padding: 30px; font-size: 16px; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255); overflow: scroll; }
.markdown-preview[data-use-github-style] > :first-child { margin-top: 0px !important; }
.markdown-preview[data-use-github-style] > :last-child { margin-bottom: 0px !important; }
.markdown-preview[data-use-github-style] a:not([href]) { color: inherit; text-decoration: none; }
.markdown-preview[data-use-github-style] .absent { color: rgb(204, 0, 0); }
.markdown-preview[data-use-github-style] .anchor { position: absolute; top: 0px; left: 0px; display: block; padding-right: 6px; padding-left: 30px; margin-left: -30px; }
.markdown-preview[data-use-github-style] .anchor:focus { outline: none; }
.markdown-preview[data-use-github-style] h1, .markdown-preview[data-use-github-style] h2, .markdown-preview[data-use-github-style] h3, .markdown-preview[data-use-github-style] h4, .markdown-preview[data-use-github-style] h5, .markdown-preview[data-use-github-style] h6 { position: relative; margin-top: 1em; margin-bottom: 16px; font-weight: bold; line-height: 1.4; }
.markdown-preview[data-use-github-style] h1 .octicon-link, .markdown-preview[data-use-github-style] h2 .octicon-link, .markdown-preview[data-use-github-style] h3 .octicon-link, .markdown-preview[data-use-github-style] h4 .octicon-link, .markdown-preview[data-use-github-style] h5 .octicon-link, .markdown-preview[data-use-github-style] h6 .octicon-link { display: none; color: rgb(0, 0, 0); vertical-align: middle; }
.markdown-preview[data-use-github-style] h1:hover .anchor, .markdown-preview[data-use-github-style] h2:hover .anchor, .markdown-preview[data-use-github-style] h3:hover .anchor, .markdown-preview[data-use-github-style] h4:hover .anchor, .markdown-preview[data-use-github-style] h5:hover .anchor, .markdown-preview[data-use-github-style] h6:hover .anchor { padding-left: 8px; margin-left: -30px; text-decoration: none; }
.markdown-preview[data-use-github-style] h1:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h2:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h3:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h4:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h5:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h6:hover .anchor .octicon-link { display: inline-block; }
.markdown-preview[data-use-github-style] h1 tt, .markdown-preview[data-use-github-style] h2 tt, .markdown-preview[data-use-github-style] h3 tt, .markdown-preview[data-use-github-style] h4 tt, .markdown-preview[data-use-github-style] h5 tt, .markdown-preview[data-use-github-style] h6 tt, .markdown-preview[data-use-github-style] h1 code, .markdown-preview[data-use-github-style] h2 code, .markdown-preview[data-use-github-style] h3 code, .markdown-preview[data-use-github-style] h4 code, .markdown-preview[data-use-github-style] h5 code, .markdown-preview[data-use-github-style] h6 code { font-size: inherit; }
.markdown-preview[data-use-github-style] h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
.markdown-preview[data-use-github-style] h1 .anchor { line-height: 1; }
.markdown-preview[data-use-github-style] h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(238, 238, 238); }
.markdown-preview[data-use-github-style] h2 .anchor { line-height: 1; }
.markdown-preview[data-use-github-style] h3 { font-size: 1.5em; line-height: 1.43; }
.markdown-preview[data-use-github-style] h3 .anchor { line-height: 1.2; }
.markdown-preview[data-use-github-style] h4 { font-size: 1.25em; }
.markdown-preview[data-use-github-style] h4 .anchor { line-height: 1.2; }
.markdown-preview[data-use-github-style] h5 { font-size: 1em; }
.markdown-preview[data-use-github-style] h5 .anchor { line-height: 1.1; }
.markdown-preview[data-use-github-style] h6 { font-size: 1em; color: rgb(119, 119, 119); }
.markdown-preview[data-use-github-style] h6 .anchor { line-height: 1.1; }
.markdown-preview[data-use-github-style] p, .markdown-preview[data-use-github-style] blockquote, .markdown-preview[data-use-github-style] ul, .markdown-preview[data-use-github-style] ol, .markdown-preview[data-use-github-style] dl, .markdown-preview[data-use-github-style] table, .markdown-preview[data-use-github-style] pre { margin-top: 0px; margin-bottom: 16px; }
.markdown-preview[data-use-github-style] hr { height: 4px; padding: 0px; margin: 16px 0px; background-color: rgb(231, 231, 231); border: 0px none; }
.markdown-preview[data-use-github-style] ul, .markdown-preview[data-use-github-style] ol { padding-left: 2em; }
.markdown-preview[data-use-github-style] ul.no-list, .markdown-preview[data-use-github-style] ol.no-list { padding: 0px; list-style-type: none; }
.markdown-preview[data-use-github-style] ul ul, .markdown-preview[data-use-github-style] ul ol, .markdown-preview[data-use-github-style] ol ol, .markdown-preview[data-use-github-style] ol ul { margin-top: 0px; margin-bottom: 0px; }
.markdown-preview[data-use-github-style] li > p { margin-top: 16px; }
.markdown-preview[data-use-github-style] dl { padding: 0px; }
.markdown-preview[data-use-github-style] dl dt { padding: 0px; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: bold; }
.markdown-preview[data-use-github-style] dl dd { padding: 0px 16px; margin-bottom: 16px; }
.markdown-preview[data-use-github-style] blockquote { padding: 0px 15px; color: rgb(119, 119, 119); border-left: 4px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] blockquote > :first-child { margin-top: 0px; }
.markdown-preview[data-use-github-style] blockquote > :last-child { margin-bottom: 0px; }
.markdown-preview[data-use-github-style] table { display: block; width: 100%; overflow: auto; word-break: keep-all; }
.markdown-preview[data-use-github-style] table th { font-weight: bold; }
.markdown-preview[data-use-github-style] table th, .markdown-preview[data-use-github-style] table td { padding: 6px 13px; border: 1px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] table tr { background-color: rgb(255, 255, 255); border-top: 1px solid rgb(204, 204, 204); }
.markdown-preview[data-use-github-style] table tr:nth-child(2n) { background-color: rgb(248, 248, 248); }
.markdown-preview[data-use-github-style] img { max-width: 100%; box-sizing: border-box; }
.markdown-preview[data-use-github-style] .emoji { max-width: none; }
.markdown-preview[data-use-github-style] span.frame { display: block; overflow: hidden; }
.markdown-preview[data-use-github-style] span.frame > span { display: block; float: left; width: auto; padding: 7px; margin: 13px 0px 0px; overflow: hidden; border: 1px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] span.frame span img { display: block; float: left; }
.markdown-preview[data-use-github-style] span.frame span span { display: block; padding: 5px 0px 0px; clear: both; color: rgb(51, 51, 51); }
.markdown-preview[data-use-github-style] span.align-center { display: block; overflow: hidden; clear: both; }
.markdown-preview[data-use-github-style] span.align-center > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: center; }
.markdown-preview[data-use-github-style] span.align-center span img { margin: 0px auto; text-align: center; }
.markdown-preview[data-use-github-style] span.align-right { display: block; overflow: hidden; clear: both; }
.markdown-preview[data-use-github-style] span.align-right > span { display: block; margin: 13px 0px 0px; overflow: hidden; text-align: right; }
.markdown-preview[data-use-github-style] span.align-right span img { margin: 0px; text-align: right; }
.markdown-preview[data-use-github-style] span.float-left { display: block; float: left; margin-right: 13px; overflow: hidden; }
.markdown-preview[data-use-github-style] span.float-left span { margin: 13px 0px 0px; }
.markdown-preview[data-use-github-style] span.float-right { display: block; float: right; margin-left: 13px; overflow: hidden; }
.markdown-preview[data-use-github-style] span.float-right > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: right; }
.markdown-preview[data-use-github-style] code, .markdown-preview[data-use-github-style] tt { padding: 0.2em 0px; margin: 0px; font-size: 85%; background-color: rgba(0, 0, 0, 0.04); border-radius: 3px; }
.markdown-preview[data-use-github-style] code::before, .markdown-preview[data-use-github-style] tt::before, .markdown-preview[data-use-github-style] code::after, .markdown-preview[data-use-github-style] tt::after { letter-spacing: -0.2em; content: " "; }
.markdown-preview[data-use-github-style] code br, .markdown-preview[data-use-github-style] tt br { display: none; }
.markdown-preview[data-use-github-style] del code { text-decoration: inherit; }
.markdown-preview[data-use-github-style] pre > code { padding: 0px; margin: 0px; font-size: 100%; word-break: normal; white-space: pre; background: transparent; border: 0px; }
.markdown-preview[data-use-github-style] .highlight { margin-bottom: 16px; }
.markdown-preview[data-use-github-style] .highlight pre, .markdown-preview[data-use-github-style] pre { padding: 16px; overflow: auto; font-size: 85%; line-height: 1.45; background-color: rgb(247, 247, 247); border-radius: 3px; }
.markdown-preview[data-use-github-style] .highlight pre { margin-bottom: 0px; word-break: normal; }
.markdown-preview[data-use-github-style] pre { word-wrap: normal; }
.markdown-preview[data-use-github-style] pre code, .markdown-preview[data-use-github-style] pre tt { display: inline; max-width: initial; padding: 0px; margin: 0px; overflow: initial; line-height: inherit; word-wrap: normal; background-color: transparent; border: 0px; }
.markdown-preview[data-use-github-style] pre code::before, .markdown-preview[data-use-github-style] pre tt::before, .markdown-preview[data-use-github-style] pre code::after, .markdown-preview[data-use-github-style] pre tt::after { content: normal; }
.markdown-preview[data-use-github-style] kbd { display: inline-block; padding: 3px 5px; font-size: 11px; line-height: 10px; color: rgb(85, 85, 85); vertical-align: middle; background-color: rgb(252, 252, 252); border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(204, 204, 204) rgb(187, 187, 187); border-image: initial; border-radius: 3px; box-shadow: rgb(187, 187, 187) 0px -1px 0px inset; }
.markdown-preview[data-use-github-style] a { color: rgb(51, 122, 183); }
.markdown-preview[data-use-github-style] code { color: inherit; }
.markdown-preview[data-use-github-style] pre.editor-colors { padding: 0.8em 1em; margin-bottom: 1em; font-size: 0.85em; border-radius: 4px; overflow: auto; }
.scrollbars-visible-always .markdown-preview pre.editor-colors .vertical-scrollbar, .scrollbars-visible-always .markdown-preview pre.editor-colors .horizontal-scrollbar { visibility: hidden; }
.scrollbars-visible-always .markdown-preview pre.editor-colors:hover .vertical-scrollbar, .scrollbars-visible-always .markdown-preview pre.editor-colors:hover .horizontal-scrollbar { visibility: visible; }
.markdown-preview .task-list-item-checkbox { position: absolute; margin: 0.25em 0px 0px -1.4em; }
.markdown-preview:not([data-use-github-style]) { padding: 2em; font-size: 1.2em; color: rgb(56, 58, 66); background-color: rgb(250, 250, 250); overflow: auto; }
.markdown-preview:not([data-use-github-style]) > :first-child { margin-top: 0px; }
.markdown-preview:not([data-use-github-style]) h1, .markdown-preview:not([data-use-github-style]) h2, .markdown-preview:not([data-use-github-style]) h3, .markdown-preview:not([data-use-github-style]) h4, .markdown-preview:not([data-use-github-style]) h5, .markdown-preview:not([data-use-github-style]) h6 { line-height: 1.2; margin-top: 1.5em; margin-bottom: 0.5em; color: rgb(0, 0, 0); }
.markdown-preview:not([data-use-github-style]) h1 { font-size: 2.4em; font-weight: 300; }
.markdown-preview:not([data-use-github-style]) h2 { font-size: 1.8em; font-weight: 400; }
.markdown-preview:not([data-use-github-style]) h3 { font-size: 1.5em; font-weight: 500; }
.markdown-preview:not([data-use-github-style]) h4 { font-size: 1.2em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) h5 { font-size: 1.1em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) h6 { font-size: 1em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) strong { color: rgb(0, 0, 0); }
.markdown-preview:not([data-use-github-style]) del { color: rgb(94, 97, 110); }
.markdown-preview:not([data-use-github-style]) a, .markdown-preview:not([data-use-github-style]) a code { color: rgb(82, 111, 255); }
.markdown-preview:not([data-use-github-style]) img { max-width: 100%; }
.markdown-preview:not([data-use-github-style]) > p { margin-top: 0px; margin-bottom: 1.5em; }
.markdown-preview:not([data-use-github-style]) > ul, .markdown-preview:not([data-use-github-style]) > ol { margin-bottom: 1.5em; }
.markdown-preview:not([data-use-github-style]) blockquote { margin: 1.5em 0px; font-size: inherit; color: rgb(94, 97, 110); border-color: rgb(209, 209, 210); border-width: 4px; }
.markdown-preview:not([data-use-github-style]) hr { margin: 3em 0px; border-top: 2px dashed rgb(209, 209, 210); background: none; }
.markdown-preview:not([data-use-github-style]) table { margin: 1.5em 0px; }
.markdown-preview:not([data-use-github-style]) th { color: rgb(0, 0, 0); }
.markdown-preview:not([data-use-github-style]) th, .markdown-preview:not([data-use-github-style]) td { padding: 0.66em 1em; border: 1px solid rgb(209, 209, 210); }
.markdown-preview:not([data-use-github-style]) pre, .markdown-preview:not([data-use-github-style]) code { color: rgb(0, 0, 0); background-color: rgb(234, 234, 235); }
.markdown-preview:not([data-use-github-style]) pre, .markdown-preview:not([data-use-github-style]) pre.editor-colors { margin: 1.5em 0px; padding: 1em; font-size: 0.92em; border-radius: 3px; background-color: rgb(240, 240, 240); }
.markdown-preview:not([data-use-github-style]) kbd { color: rgb(0, 0, 0); border-width: 1px 1px 2px; border-style: solid; border-color: rgb(209, 209, 210) rgb(209, 209, 210) rgb(193, 193, 194); border-image: initial; background-color: rgb(234, 234, 235); }
.markdown-preview[data-use-github-style] { font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif; line-height: 1.6; word-wrap: break-word; padding: 30px; font-size: 16px; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255); overflow: scroll; }
.markdown-preview[data-use-github-style] > :first-child { margin-top: 0px !important; }
.markdown-preview[data-use-github-style] > :last-child { margin-bottom: 0px !important; }
.markdown-preview[data-use-github-style] a:not([href]) { color: inherit; text-decoration: none; }
.markdown-preview[data-use-github-style] .absent { color: rgb(204, 0, 0); }
.markdown-preview[data-use-github-style] .anchor { position: absolute; top: 0px; left: 0px; display: block; padding-right: 6px; padding-left: 30px; margin-left: -30px; }
.markdown-preview[data-use-github-style] .anchor:focus { outline: none; }
.markdown-preview[data-use-github-style] h1, .markdown-preview[data-use-github-style] h2, .markdown-preview[data-use-github-style] h3, .markdown-preview[data-use-github-style] h4, .markdown-preview[data-use-github-style] h5, .markdown-preview[data-use-github-style] h6 { position: relative; margin-top: 1em; margin-bottom: 16px; font-weight: bold; line-height: 1.4; }
.markdown-preview[data-use-github-style] h1 .octicon-link, .markdown-preview[data-use-github-style] h2 .octicon-link, .markdown-preview[data-use-github-style] h3 .octicon-link, .markdown-preview[data-use-github-style] h4 .octicon-link, .markdown-preview[data-use-github-style] h5 .octicon-link, .markdown-preview[data-use-github-style] h6 .octicon-link { display: none; color: rgb(0, 0, 0); vertical-align: middle; }
.markdown-preview[data-use-github-style] h1:hover .anchor, .markdown-preview[data-use-github-style] h2:hover .anchor, .markdown-preview[data-use-github-style] h3:hover .anchor, .markdown-preview[data-use-github-style] h4:hover .anchor, .markdown-preview[data-use-github-style] h5:hover .anchor, .markdown-preview[data-use-github-style] h6:hover .anchor { padding-left: 8px; margin-left: -30px; text-decoration: none; }
.markdown-preview[data-use-github-style] h1:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h2:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h3:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h4:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h5:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h6:hover .anchor .octicon-link { display: inline-block; }
.markdown-preview[data-use-github-style] h1 tt, .markdown-preview[data-use-github-style] h2 tt, .markdown-preview[data-use-github-style] h3 tt, .markdown-preview[data-use-github-style] h4 tt, .markdown-preview[data-use-github-style] h5 tt, .markdown-preview[data-use-github-style] h6 tt, .markdown-preview[data-use-github-style] h1 code, .markdown-preview[data-use-github-style] h2 code, .markdown-preview[data-use-github-style] h3 code, .markdown-preview[data-use-github-style] h4 code, .markdown-preview[data-use-github-style] h5 code, .markdown-preview[data-use-github-style] h6 code { font-size: inherit; }
.markdown-preview[data-use-github-style] h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
.markdown-preview[data-use-github-style] h1 .anchor { line-height: 1; }
.markdown-preview[data-use-github-style] h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(238, 238, 238); }
.markdown-preview[data-use-github-style] h2 .anchor { line-height: 1; }
.markdown-preview[data-use-github-style] h3 { font-size: 1.5em; line-height: 1.43; }
.markdown-preview[data-use-github-style] h3 .anchor { line-height: 1.2; }
.markdown-preview[data-use-github-style] h4 { font-size: 1.25em; }
.markdown-preview[data-use-github-style] h4 .anchor { line-height: 1.2; }
.markdown-preview[data-use-github-style] h5 { font-size: 1em; }
.markdown-preview[data-use-github-style] h5 .anchor { line-height: 1.1; }
.markdown-preview[data-use-github-style] h6 { font-size: 1em; color: rgb(119, 119, 119); }
.markdown-preview[data-use-github-style] h6 .anchor { line-height: 1.1; }
.markdown-preview[data-use-github-style] p, .markdown-preview[data-use-github-style] blockquote, .markdown-preview[data-use-github-style] ul, .markdown-preview[data-use-github-style] ol, .markdown-preview[data-use-github-style] dl, .markdown-preview[data-use-github-style] table, .markdown-preview[data-use-github-style] pre { margin-top: 0px; margin-bottom: 16px; }
.markdown-preview[data-use-github-style] hr { height: 4px; padding: 0px; margin: 16px 0px; background-color: rgb(231, 231, 231); border: 0px none; }
.markdown-preview[data-use-github-style] ul, .markdown-preview[data-use-github-style] ol { padding-left: 2em; }
.markdown-preview[data-use-github-style] ul.no-list, .markdown-preview[data-use-github-style] ol.no-list { padding: 0px; list-style-type: none; }
.markdown-preview[data-use-github-style] ul ul, .markdown-preview[data-use-github-style] ul ol, .markdown-preview[data-use-github-style] ol ol, .markdown-preview[data-use-github-style] ol ul { margin-top: 0px; margin-bottom: 0px; }
.markdown-preview[data-use-github-style] li > p { margin-top: 16px; }
.markdown-preview[data-use-github-style] dl { padding: 0px; }
.markdown-preview[data-use-github-style] dl dt { padding: 0px; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: bold; }
.markdown-preview[data-use-github-style] dl dd { padding: 0px 16px; margin-bottom: 16px; }
.markdown-preview[data-use-github-style] blockquote { padding: 0px 15px; color: rgb(119, 119, 119); border-left: 4px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] blockquote > :first-child { margin-top: 0px; }
.markdown-preview[data-use-github-style] blockquote > :last-child { margin-bottom: 0px; }
.markdown-preview[data-use-github-style] table { display: block; width: 100%; overflow: auto; word-break: keep-all; }
.markdown-preview[data-use-github-style] table th { font-weight: bold; }
.markdown-preview[data-use-github-style] table th, .markdown-preview[data-use-github-style] table td { padding: 6px 13px; border: 1px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] table tr { background-color: rgb(255, 255, 255); border-top: 1px solid rgb(204, 204, 204); }
.markdown-preview[data-use-github-style] table tr:nth-child(2n) { background-color: rgb(248, 248, 248); }
.markdown-preview[data-use-github-style] img { max-width: 100%; box-sizing: border-box; }
.markdown-preview[data-use-github-style] .emoji { max-width: none; }
.markdown-preview[data-use-github-style] span.frame { display: block; overflow: hidden; }
.markdown-preview[data-use-github-style] span.frame > span { display: block; float: left; width: auto; padding: 7px; margin: 13px 0px 0px; overflow: hidden; border: 1px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] span.frame span img { display: block; float: left; }
.markdown-preview[data-use-github-style] span.frame span span { display: block; padding: 5px 0px 0px; clear: both; color: rgb(51, 51, 51); }
.markdown-preview[data-use-github-style] span.align-center { display: block; overflow: hidden; clear: both; }
.markdown-preview[data-use-github-style] span.align-center > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: center; }
.markdown-preview[data-use-github-style] span.align-center span img { margin: 0px auto; text-align: center; }
.markdown-preview[data-use-github-style] span.align-right { display: block; overflow: hidden; clear: both; }
.markdown-preview[data-use-github-style] span.align-right > span { display: block; margin: 13px 0px 0px; overflow: hidden; text-align: right; }
.markdown-preview[data-use-github-style] span.align-right span img { margin: 0px; text-align: right; }
.markdown-preview[data-use-github-style] span.float-left { display: block; float: left; margin-right: 13px; overflow: hidden; }
.markdown-preview[data-use-github-style] span.float-left span { margin: 13px 0px 0px; }
.markdown-preview[data-use-github-style] span.float-right { display: block; float: right; margin-left: 13px; overflow: hidden; }
.markdown-preview[data-use-github-style] span.float-right > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: right; }
.markdown-preview[data-use-github-style] code, .markdown-preview[data-use-github-style] tt { padding: 0.2em 0px; margin: 0px; font-size: 85%; background-color: rgba(0, 0, 0, 0.04); border-radius: 3px; }
.markdown-preview[data-use-github-style] code::before, .markdown-preview[data-use-github-style] tt::before, .markdown-preview[data-use-github-style] code::after, .markdown-preview[data-use-github-style] tt::after { letter-spacing: -0.2em; content: " "; }
.markdown-preview[data-use-github-style] code br, .markdown-preview[data-use-github-style] tt br { display: none; }
.markdown-preview[data-use-github-style] del code { text-decoration: inherit; }
.markdown-preview[data-use-github-style] pre > code { padding: 0px; margin: 0px; font-size: 100%; word-break: normal; white-space: pre; background: transparent; border: 0px; }
.markdown-preview[data-use-github-style] .highlight { margin-bottom: 16px; }
.markdown-preview[data-use-github-style] .highlight pre, .markdown-preview[data-use-github-style] pre { padding: 16px; overflow: auto; font-size: 85%; line-height: 1.45; background-color: rgb(247, 247, 247); border-radius: 3px; }
.markdown-preview[data-use-github-style] .highlight pre { margin-bottom: 0px; word-break: normal; }
.markdown-preview[data-use-github-style] pre { word-wrap: normal; }
.markdown-preview[data-use-github-style] pre code, .markdown-preview[data-use-github-style] pre tt { display: inline; max-width: initial; padding: 0px; margin: 0px; overflow: initial; line-height: inherit; word-wrap: normal; background-color: transparent; border: 0px; }
.markdown-preview[data-use-github-style] pre code::before, .markdown-preview[data-use-github-style] pre tt::before, .markdown-preview[data-use-github-style] pre code::after, .markdown-preview[data-use-github-style] pre tt::after { content: normal; }
.markdown-preview[data-use-github-style] kbd { display: inline-block; padding: 3px 5px; font-size: 11px; line-height: 10px; color: rgb(85, 85, 85); vertical-align: middle; background-color: rgb(252, 252, 252); border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204) rgb(204, 204, 204) rgb(187, 187, 187); border-image: initial; border-radius: 3px; box-shadow: rgb(187, 187, 187) 0px -1px 0px inset; }
.markdown-preview[data-use-github-style] a { color: rgb(51, 122, 183); }
.markdown-preview[data-use-github-style] pre, .markdown-preview[data-use-github-style] code { color: inherit; }
.markdown-preview[data-use-github-style] pre, .markdown-preview[data-use-github-style] pre.editor-colors { padding: 0.8em 1em; margin-bottom: 1em; font-size: 0.85em; border-radius: 4px; overflow: auto; }
.scrollbars-visible-always .markdown-preview pre.editor-colors .vertical-scrollbar, .scrollbars-visible-always .markdown-preview pre.editor-colors .horizontal-scrollbar { visibility: hidden; }
.scrollbars-visible-always .markdown-preview pre.editor-colors:hover .vertical-scrollbar, .scrollbars-visible-always .markdown-preview pre.editor-colors:hover .horizontal-scrollbar { visibility: visible; }
.markdown-preview del { text-decoration: none; position: relative; }
.markdown-preview del::after { border-bottom: 1px solid black; content: ""; left: 0px; position: absolute; right: 0px; top: 50%; }
.markdown-preview .flash { animation: flash 1s ease-out 1; outline: rgba(255, 0, 0, 0) solid 1px; }
.markdown-preview .flash:not(li) { display: block; }
.bracket-matcher .region {
  border-bottom: 1px dotted lime;
  position: absolute;
}
.line-number.bracket-matcher.bracket-matcher {
  color: #383a42;
  background-color: #e5e5e6;
}

.spell-check-misspelling .region {
  border-bottom: 2px dotted rgba(255, 51, 51, 0.75);
}
.spell-check-corrections {
  width: 25em !important;
}

.markdown-themeable-pdf-page-break {
  border-top: 2px dotted #0098ff;
}
.markdown-themeable-pdf-page-break span {
  opacity: .35;
}

pre.editor-colors {
  background-color: #fafafa;
  color: #383a42;
}
pre.editor-colors .line.cursor-line {
  background-color: rgba(56, 58, 66, 0.05);
}
pre.editor-colors .invisible {
  color: #383a42;
}
pre.editor-colors .cursor {
  border-left: 2px solid #526fff;
}
pre.editor-colors .selection .region {
  background-color: #e5e5e6;
}
pre.editor-colors .bracket-matcher .region {
  border-bottom: 1px solid #526fff;
  box-sizing: border-box;
}
pre.editor-colors .invisible-character {
  color: rgba(56, 58, 66, 0.2);
}
pre.editor-colors .indent-guide {
  color: rgba(56, 58, 66, 0.2);
}
pre.editor-colors .wrap-guide {
  background-color: rgba(56, 58, 66, 0.2);
}
pre.editor-colors .find-result .region.region.region,
pre.editor-colors .current-result .region.region.region {
  border-radius: 2px;
  background-color: rgba(82, 111, 255, 0.2);
  transition: border-color 0.4s;
}
pre.editor-colors .find-result .region.region.region {
  border: 2px solid transparent;
}
pre.editor-colors .current-result .region.region.region {
  border: 2px solid #526fff;
  transition-duration: .1s;
}
pre.editor-colors .gutter .line-number {
  color: #9d9d9f;
  -webkit-font-smoothing: antialiased;
}
pre.editor-colors .gutter .line-number.cursor-line {
  color: #383a42;
  background-color: #e5e5e6;
}
pre.editor-colors .gutter .line-number.cursor-line-no-selection {
  background-color: transparent;
}
pre.editor-colors .gutter .line-number .icon-right {
  color: #383a42;
}
pre.editor-colors .gutter:not(.git-diff-icon) .line-number.git-line-removed.git-line-removed::before {
  bottom: -3px;
}
pre.editor-colors .gutter:not(.git-diff-icon) .line-number.git-line-removed::after {
  content: "";
  position: absolute;
  left: 0px;
  bottom: 0px;
  width: 25px;
  border-bottom: 1px dotted rgba(255, 20, 20, 0.5);
  pointer-events: none;
}
pre.editor-colors .gutter .line-number.folded,
pre.editor-colors .gutter .line-number:after,
pre.editor-colors .fold-marker:after {
  color: #383a42;
}
.syntax--comment {
  color: #a0a1a7;
  font-style: italic;
}
.syntax--comment .syntax--markup.syntax--link {
  color: #a0a1a7;
}
.syntax--entity.syntax--name.syntax--type {
  color: #c18401;
}
.syntax--entity.syntax--other.syntax--inherited-class {
  color: #50a14f;
}
.syntax--keyword {
  color: #a626a4;
}
.syntax--keyword.syntax--control {
  color: #a626a4;
}
.syntax--keyword.syntax--operator {
  color: #383a42;
}
.syntax--keyword.syntax--other.syntax--special-method {
  color: #4078f2;
}
.syntax--keyword.syntax--other.syntax--unit {
  color: #986801;
}
.syntax--storage {
  color: #a626a4;
}
.syntax--storage.syntax--type.syntax--annotation,
.syntax--storage.syntax--type.syntax--primitive {
  color: #a626a4;
}
.syntax--storage.syntax--modifier.syntax--package,
.syntax--storage.syntax--modifier.syntax--import {
  color: #383a42;
}
.syntax--constant {
  color: #986801;
}
.syntax--constant.syntax--variable {
  color: #986801;
}
.syntax--constant.syntax--character.syntax--escape {
  color: #0184bc;
}
.syntax--constant.syntax--numeric {
  color: #986801;
}
.syntax--constant.syntax--other.syntax--color {
  color: #0184bc;
}
.syntax--constant.syntax--other.syntax--symbol {
  color: #0184bc;
}
.syntax--variable {
  color: #e45649;
}
.syntax--variable.syntax--interpolation {
  color: #ca1243;
}
.syntax--variable.syntax--parameter {
  color: #383a42;
}
.syntax--string {
  color: #50a14f;
}
.syntax--string.syntax--regexp {
  color: #0184bc;
}
.syntax--string.syntax--regexp .syntax--source.syntax--ruby.syntax--embedded {
  color: #c18401;
}
.syntax--string.syntax--other.syntax--link {
  color: #e45649;
}
.syntax--punctuation.syntax--definition.syntax--comment {
  color: #a0a1a7;
}
.syntax--punctuation.syntax--definition.syntax--method-parameters,
.syntax--punctuation.syntax--definition.syntax--function-parameters,
.syntax--punctuation.syntax--definition.syntax--parameters,
.syntax--punctuation.syntax--definition.syntax--separator,
.syntax--punctuation.syntax--definition.syntax--seperator,
.syntax--punctuation.syntax--definition.syntax--array {
  color: #383a42;
}
.syntax--punctuation.syntax--definition.syntax--heading,
.syntax--punctuation.syntax--definition.syntax--identity {
  color: #4078f2;
}
.syntax--punctuation.syntax--definition.syntax--bold {
  color: #c18401;
  font-weight: bold;
}
.syntax--punctuation.syntax--definition.syntax--italic {
  color: #a626a4;
  font-style: italic;
}
.syntax--punctuation.syntax--section.syntax--embedded {
  color: #ca1243;
}
.syntax--punctuation.syntax--section.syntax--method,
.syntax--punctuation.syntax--section.syntax--class,
.syntax--punctuation.syntax--section.syntax--inner-class {
  color: #383a42;
}
.syntax--support.syntax--class {
  color: #c18401;
}
.syntax--support.syntax--type {
  color: #0184bc;
}
.syntax--support.syntax--function {
  color: #0184bc;
}
.syntax--support.syntax--function.syntax--any-method {
  color: #4078f2;
}
.syntax--entity.syntax--name.syntax--function {
  color: #4078f2;
}
.syntax--entity.syntax--name.syntax--class,
.syntax--entity.syntax--name.syntax--type.syntax--class {
  color: #c18401;
}
.syntax--entity.syntax--name.syntax--section {
  color: #4078f2;
}
.syntax--entity.syntax--name.syntax--tag {
  color: #e45649;
}
.syntax--entity.syntax--other.syntax--attribute-name {
  color: #986801;
}
.syntax--entity.syntax--other.syntax--attribute-name.syntax--id {
  color: #4078f2;
}
.syntax--meta.syntax--class {
  color: #c18401;
}
.syntax--meta.syntax--class.syntax--body {
  color: #383a42;
}
.syntax--meta.syntax--method-call,
.syntax--meta.syntax--method {
  color: #383a42;
}
.syntax--meta.syntax--definition.syntax--variable {
  color: #e45649;
}
.syntax--meta.syntax--link {
  color: #986801;
}
.syntax--meta.syntax--require {
  color: #4078f2;
}
.syntax--meta.syntax--selector {
  color: #a626a4;
}
.syntax--meta.syntax--separator {
  color: #383a42;
}
.syntax--meta.syntax--tag {
  color: #383a42;
}
.syntax--underline {
  text-decoration: underline;
}
.syntax--none {
  color: #383a42;
}
.syntax--invalid.syntax--deprecated {
  color: #000000 !important;
  background-color: #f2a60d !important;
}
.syntax--invalid.syntax--illegal {
  color: white !important;
  background-color: #ff1414 !important;
}
.syntax--markup.syntax--bold {
  color: #986801;
  font-weight: bold;
}
.syntax--markup.syntax--changed {
  color: #a626a4;
}
.syntax--markup.syntax--deleted {
  color: #e45649;
}
.syntax--markup.syntax--italic {
  color: #a626a4;
  font-style: italic;
}
.syntax--markup.syntax--heading {
  color: #e45649;
}
.syntax--markup.syntax--heading .syntax--punctuation.syntax--definition.syntax--heading {
  color: #4078f2;
}
.syntax--markup.syntax--link {
  color: #0184bc;
}
.syntax--markup.syntax--inserted {
  color: #50a14f;
}
.syntax--markup.syntax--quote {
  color: #986801;
}
.syntax--markup.syntax--raw {
  color: #50a14f;
}
.syntax--source.syntax--c .syntax--keyword.syntax--operator {
  color: #a626a4;
}
.syntax--source.syntax--cpp .syntax--keyword.syntax--operator {
  color: #a626a4;
}
.syntax--source.syntax--cs .syntax--keyword.syntax--operator {
  color: #a626a4;
}
.syntax--source.syntax--css .syntax--property-name,
.syntax--source.syntax--css .syntax--property-value {
  color: #696c77;
}
.syntax--source.syntax--css .syntax--property-name.syntax--support,
.syntax--source.syntax--css .syntax--property-value.syntax--support {
  color: #383a42;
}
.syntax--source.syntax--elixir .syntax--source.syntax--embedded.syntax--source {
  color: #383a42;
}
.syntax--source.syntax--elixir .syntax--constant.syntax--language,
.syntax--source.syntax--elixir .syntax--constant.syntax--numeric,
.syntax--source.syntax--elixir .syntax--constant.syntax--definition {
  color: #4078f2;
}
.syntax--source.syntax--elixir .syntax--variable.syntax--definition,
.syntax--source.syntax--elixir .syntax--variable.syntax--anonymous {
  color: #a626a4;
}
.syntax--source.syntax--elixir .syntax--parameter.syntax--variable.syntax--function {
  color: #986801;
  font-style: italic;
}
.syntax--source.syntax--elixir .syntax--quoted {
  color: #50a14f;
}
.syntax--source.syntax--elixir .syntax--keyword.syntax--special-method,
.syntax--source.syntax--elixir .syntax--embedded.syntax--section,
.syntax--source.syntax--elixir .syntax--embedded.syntax--source.syntax--empty {
  color: #e45649;
}
.syntax--source.syntax--elixir .syntax--readwrite.syntax--module .syntax--punctuation {
  color: #e45649;
}
.syntax--source.syntax--elixir .syntax--regexp.syntax--section,
.syntax--source.syntax--elixir .syntax--regexp.syntax--string {
  color: #ca1243;
}
.syntax--source.syntax--elixir .syntax--separator,
.syntax--source.syntax--elixir .syntax--keyword.syntax--operator {
  color: #986801;
}
.syntax--source.syntax--elixir .syntax--variable.syntax--constant {
  color: #c18401;
}
.syntax--source.syntax--elixir .syntax--array,
.syntax--source.syntax--elixir .syntax--scope,
.syntax--source.syntax--elixir .syntax--section {
  color: #696c77;
}
.syntax--source.syntax--gfm .syntax--markup {
  -webkit-font-smoothing: auto;
}
.syntax--source.syntax--gfm .syntax--link .syntax--entity {
  color: #4078f2;
}
.syntax--source.syntax--go .syntax--storage.syntax--type.syntax--string {
  color: #a626a4;
}
.syntax--source.syntax--ini .syntax--keyword.syntax--other.syntax--definition.syntax--ini {
  color: #e45649;
}
.syntax--source.syntax--java .syntax--storage.syntax--modifier.syntax--import {
  color: #c18401;
}
.syntax--source.syntax--java .syntax--storage.syntax--type {
  color: #c18401;
}
.syntax--source.syntax--java .syntax--keyword.syntax--operator.syntax--instanceof {
  color: #a626a4;
}
.syntax--source.syntax--java-properties .syntax--meta.syntax--key-pair {
  color: #e45649;
}
.syntax--source.syntax--java-properties .syntax--meta.syntax--key-pair > .syntax--punctuation {
  color: #383a42;
}
.syntax--source.syntax--js .syntax--keyword.syntax--operator {
  color: #0184bc;
}
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--delete,
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--in,
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--of,
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--instanceof,
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--new,
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--typeof,
.syntax--source.syntax--js .syntax--keyword.syntax--operator.syntax--void {
  color: #a626a4;
}
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--dictionary.syntax--json > .syntax--string.syntax--quoted.syntax--json {
  color: #e45649;
}
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--dictionary.syntax--json > .syntax--string.syntax--quoted.syntax--json > .syntax--punctuation.syntax--string {
  color: #e45649;
}
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--dictionary.syntax--json > .syntax--value.syntax--json > .syntax--string.syntax--quoted.syntax--json,
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--array.syntax--json > .syntax--value.syntax--json > .syntax--string.syntax--quoted.syntax--json,
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--dictionary.syntax--json > .syntax--value.syntax--json > .syntax--string.syntax--quoted.syntax--json > .syntax--punctuation,
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--array.syntax--json > .syntax--value.syntax--json > .syntax--string.syntax--quoted.syntax--json > .syntax--punctuation {
  color: #50a14f;
}
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--dictionary.syntax--json > .syntax--constant.syntax--language.syntax--json,
.syntax--source.syntax--json .syntax--meta.syntax--structure.syntax--array.syntax--json > .syntax--constant.syntax--language.syntax--json {
  color: #0184bc;
}
.syntax--source.syntax--ruby .syntax--constant.syntax--other.syntax--symbol > .syntax--punctuation {
  color: inherit;
}
.syntax--source.syntax--php .syntax--class.syntax--bracket {
  color: #383a42;
}
.syntax--source.syntax--python .syntax--keyword.syntax--operator.syntax--logical.syntax--python {
  color: #a626a4;
}
.syntax--source.syntax--python .syntax--variable.syntax--parameter {
  color: #986801;
}
</style>
  </head>
  <body class='markdown-preview'><h1>SVO详解</h1>
<p>首先科普下计算机视觉和机器视觉</p>
<h2>计算机视觉</h2>
<p>主要是质的分析，比如分类识别，这是一个杯子那是一条狗。或者做身份确认，比如人脸识别，车牌识别。或者做行为分析，比如人员入侵等。</p>
<h2>机器视觉</h2>
<p>主要侧重对量的分析，比如用视觉去测量一个零件的直径。</p>
<h2>接下来开始说论文的重点</h2>
<p><strong>我们对于矩阵求逆的时候，要主要必须得保证这个矩阵是一个方阵才行哦</strong></p>
<h3>相机类型</h3>
<p>刚才介绍了普通的相机，现在介绍下RGB-D相机</p>
<ol>
<li>红外结构光来测量像素距离，例如kinect1</li>
<li>飞行时间法（ToF）测量像素距离，例如kinect2</li>
</ol>
<h3>相机映射模型</h3>
<p>由相似三角形比例得：这里负号是指反向的意思</p>
<span class="math"><script type="math/tex; mode=display">\frac{Z}{f}=-\frac{X}{X'}=-\frac{Y}{Y'}
</script></span>
<p>由于相机内置旋转算法，所以我们拍出来的照片都是正面的</p>
<span class="math"><script type="math/tex; mode=display">\frac{Z}{f}=\frac{X}{X'}=\frac{Y}{Y'}
</script></span>
<span class="math"><script type="math/tex; mode=display">X'=\frac{Xf}{Z}
</script></span>
<span class="math"><script type="math/tex; mode=display">Y'=\frac{Yf}{Z}
</script></span>
<p>照片上一点像素 <span class="math"><script type="math/tex">\vec p(u,v)</script></span>，</p>
<span class="math"><script type="math/tex; mode=display">u=\alpha X'+c_{x}
</script></span>
<span class="math"><script type="math/tex; mode=display">v=\beta Y'+c_{y}
</script></span>
<span class="math"><script type="math/tex; mode=display">u=\alpha f\frac{X}{Z}+c_{x}
</script></span>
<span class="math"><script type="math/tex; mode=display">v=\beta f\frac{Y}{Z}+c_{y}
</script></span>
<span class="math"><script type="math/tex; mode=display">u=f_{x}\frac{X}{Z}+c_{x}
</script></span>
<span class="math"><script type="math/tex; mode=display">v=f_{y}\frac{Y}{Z}+c_{y}
</script></span>
<p>化成齐次矩阵</p>
<span class="math"><script type="math/tex; mode=display">\begin{bmatrix}
u\\
v\\
1\\
\end{bmatrix}=\frac{1}{Z} \begin{bmatrix}
f_{x}&0&c_{x}\\
0&f_{y}&c_{y}\\
0&0&1\\
\end{bmatrix} \begin{bmatrix}
X\\
Y\\
Z\\
\end{bmatrix}</script></span>
<span class="math"><script type="math/tex; mode=display">=\frac{1}{Z}KP
</script></span>
<span class="math"><script type="math/tex; mode=display">Z\begin{bmatrix}
u\\
v\\
1\\
\end{bmatrix}=KP</script></span>
<p>其中 <span class="math"><script type="math/tex">K</script></span> 是内参，至此就是 <span class="math"><script type="math/tex">\mathbb{R}^{3} \mapsto \mathbb{R}^{2}</script></span></p>
<p>我们现在将推到 <span class="math"><script type="math/tex">\mathbb{R}^{2} \mapsto \mathbb{R}^{3}</script></span>，不过在此之前我们必须要知道距离<span class="math"><script type="math/tex">d</script></span></p>
<span class="math"><script type="math/tex; mode=display">Z=d
</script></span>
<span class="math"><script type="math/tex; mode=display">X=\frac{u-c_{x}}{f_{x}}Z
</script></span>
<span class="math"><script type="math/tex; mode=display">Y=\frac{u-c_{x}}{f_{x}}Z
</script></span>
<p>上式就是<em>像素到相机坐标</em>的公式</p>
<p>内参属于相机出产自带的属性，我们可以通过棋盘标定法来实现相机的标定</p>
<h4>棋盘标定法</h4>
<h4>推导外参</h4>
<p>接下来推倒外参，外参表示相机运动的参数</p>
<span class="math"><script type="math/tex; mode=display">Zp_{u,v}=Z\begin{bmatrix}
u\\
v\\
1\\
\end{bmatrix} </script></span>
<h3>向量到矩阵的变换</h3>
<h4>外积计算</h4>
<span class="math"><script type="math/tex; mode=display">\vec a\times \vec b=\begin{bmatrix}
i&j&k\\
a_{1}&a_{2}&a_{3}\\
b_{1}&b_{2}&b_{3}\\
\end{bmatrix}=\begin{bmatrix}
a_{2}b_{3}-a_{3}b_{2}\\
a_{3}b_{1}-a_{1}b_{3}\\
a_{1}b_{2}-a_{2}b_{1}\\
\end{bmatrix}=\begin{bmatrix}
0&-a_{3}&a_{2}\\
a_{3}&0&-a_{1}\\
-a_{2}&a_{1}&0\\
\end{bmatrix}\vec b</script></span>
<span class="math"><script type="math/tex; mode=display">=a^{\wedge}\vec b=\begin{bmatrix}
0&b_{3}&-b_{2}\\
-b_{3}&0&b_{1}\\
b_{2}&-b_{1}&0\\
\end{bmatrix}\vec a=-b^{\wedge}\vec a</script></span>
<p>故<span class="math"><script type="math/tex">a^{\wedge}\vec b=-b^{\wedge}\vec a</script></span>，这个公式转换很最重要在后文中有提及</p>
<h3>旋转矩阵</h3>
<h4>刚体变换</h4>
<p>相机运动是一个刚体运动，他保证了同一个向量在各个坐标系下的长度和夹角都不会发生变化，这种变换属于欧式变换。欧式变换包括了旋转和平移。首先我们考虑旋转。我们设某个正交单位基 <span class="math"><script type="math/tex">(e_{1},e_{2},e_{3})</script></span> 经过一次旋转后变成了 <span class="math"><script type="math/tex">(e'_{1},e'_{2},e'_{3})</script></span>，那么同一向量 <span class="math"><script type="math/tex">\vec a</script></span>，在两个坐标系下的坐标分别是 <span class="math"><script type="math/tex">[a_{1},a_{2},a_{3}]^T</script></span>和 <span class="math"><script type="math/tex">[a'_{1},a'_{2},a'_{3}]^T</script></span>。根据定义，有：</p>
<span class="math"><script type="math/tex; mode=display">(e_{1},e_{2},e_{3})\begin{bmatrix}
a_{1}\\
a_{2}\\
a_{3}\\
\end{bmatrix}=(e'_{1},e'_{2},e'_{3})\begin{bmatrix}
a'_{1}\\
a'_{2}\\
a'_{3}\\
\end{bmatrix}</script></span>
<p>两边同时左乘一个 <span class="math"><script type="math/tex">\begin{bmatrix}
e^T_{1}\\
e^T_{2}\\
e^T_{3}\\
\end{bmatrix}</script></span>。</p>
<span class="math"><script type="math/tex; mode=display">\begin{bmatrix}
a_{1}\\
a_{2}\\
a_{3}\\
\end{bmatrix}=\begin{bmatrix}
e^T_{1}\\
e^T_{2}\\
e^T_{3}\\
\end{bmatrix}(e'_{1},e'_{2},e'_{3})\begin{bmatrix}
a'_{1}\\
a'_{2}\\
a'_{3}\\
\end{bmatrix}=\begin{bmatrix}
e^T_{1}e'_{1}&e^T_{2}e'_{1}&e^T_{3}e'_{1}\\
e^T_{2}e'_{1}&e^T_{2}e'_{2}&e^T_{2 }e'_{3}\\
e^T_{3}e'_{1}&e^T_{3}e'_{2}&e^T_{3}e'_{3}\\
\end{bmatrix}\begin{bmatrix}
a'_{1}\\
a'_{2}\\
a'_{3}\\
\end{bmatrix}=R\vec a'</script></span>
<p>其中 <span class="math"><script type="math/tex">R</script></span> 就是旋转矩阵 <em>此处解释了旋转矩阵为啥是乘法</em>，旋转矩阵满足一下性质</p>
<ol>
<li>秩为1</li>
<li>该矩阵与其转置相乘等于单位矩阵
我们把旋转矩阵的集合定义如下：</li>
</ol>
<span class="math"><script type="math/tex; mode=display">SO(3)=\{R\ \in \mathbb{R}^{n*n}|RR^T=I,det(R)=1\}
</script></span>
<p>$SO(3)$是特殊正交群的意思。
由于旋转的特殊性质，即可逆性。</p>
<span class="math"><script type="math/tex; mode=display">\vec a'=R^{-1}\vec a=R^T\vec a
</script></span>
<p>在欧式变换里，除了考虑旋转，还有平移。考虑到世界坐标系下的一个向量 <span class="math"><script type="math/tex">\vec a</script></span>,经过旋转和平移之后得到 <span class="math"><script type="math/tex">\vec a'</script></span>。</p>
<span class="math"><script type="math/tex; mode=display">\vec {a'}=R\vec a+t
</script></span>
<h3>变换矩阵</h3>
<p>假设我们做了两次变换: <span class="math"><script type="math/tex">R_{1},t_{1}和 R_{2},t_{2}</script></span>，满足</p>
<span class="math"><script type="math/tex; mode=display">\vec b=R_{1}\vec a+t_{1}, \vec c=R_{2}\vec b+t_{2}
</script></span>
<p>这样一来向量 <span class="math"><script type="math/tex">\vec c</script></span>计算比较复杂</p>
<span class="math"><script type="math/tex; mode=display">\vec c=R_{2}(R_{1}\vec a+t_{1})+t_{2}
</script></span>
<p>引入齐次坐标和变换矩阵</p>
<span class="math"><script type="math/tex; mode=display">\begin{bmatrix}
\vec {a'}\\
1\\
\end{bmatrix}=\begin{bmatrix}
R&t\\
0^T&1\\
\end{bmatrix}\begin{bmatrix}
\vec a\\
1\\
\end{bmatrix}=T\begin{bmatrix}
\vec a\\
1\\
\end{bmatrix}</script></span>
<p>其中， <span class="math"><script type="math/tex">T</script></span>是变换矩阵(Transform Matrix)，本文我们定义 <span class="math"><script type="math/tex">\tilde{a}</script></span> 表示 <span class="math"><script type="math/tex">\vec a</script></span>的齐次坐标, <span class="math"><script type="math/tex">\tilde{b}</script></span> 表示 <span class="math"><script type="math/tex">\vec b</script></span>的齐次坐标, <span class="math"><script type="math/tex">\tilde{c}</script></span> 表示 <span class="math"><script type="math/tex">\vec c</script></span>的齐次坐标,</p>
<span class="math"><script type="math/tex; mode=display">\tilde{b}=T_{1} \tilde{a},\ \ \tilde{c}=T_{2} \tilde{b} => \tilde{c}=T_{2}T_{1} \tilde{a}
</script></span>
<p>区分齐次和非齐次坐标符号很麻烦，我们直接就用 <span class="math"><script type="math/tex">\vec b=T \vec a</script></span>，代表齐次坐标。</p>
<p>关于变换矩阵 <span class="math"><script type="math/tex">T</script></span>，它的结构比较特殊，左上角为旋转矩阵，右上角为平移向量，左下角为0向量，右下角为1。这种特殊矩阵又称为特殊欧式群（Special Euclidean Group）：</p>
<span class="math"><script type="math/tex; mode=display">SE(3)=\begin{Bmatrix}T=\begin{bmatrix}R&t\\0^T&1\\\end{bmatrix} \in \mathbb{R}^{4*4}|R \in SO(3),t \in \mathbb{R}^3 \end{Bmatrix}
</script></span>
<p>同理该矩阵的逆</p>
<span class="math"><script type="math/tex; mode=display">T^{-1}=\begin{bmatrix}R^T&-R^Tt\\0^T&1\end{bmatrix}
</script></span>
<h3>旋转向量</h3>
<p>假设有一个旋转轴为 <span class="math"><script type="math/tex">\vec n</script></span>，角度为 <span class="math"><script type="math/tex">\theta</script></span>，显然他对于的旋转向量为 <span class="math"><script type="math/tex">\vec n\theta</script></span>。从旋转向量都旋转矩阵的转换过程由罗德里格斯公式：</p>
<span class="math"><script type="math/tex; mode=display">R=cos\theta I+(1-cos\theta)\vec n\vec n^T+sin\theta \vec n^{\wedge}
</script></span>
<p>这里 <span class="math"><script type="math/tex">^\wedge</script></span>是向量到反对称矩阵的转换符，见前面公式。</p>
<p><em>补充一个知识点，单位矩阵 <span class="math"><script type="math/tex">I=\begin{bmatrix}1&0&0\\0&1&0\\0&0&1\end{bmatrix}</script></span></em></p>
<p>对于转角 <span class="math"><script type="math/tex">\theta</script></span>，有：</p>
<span class="math"><script type="math/tex; mode=display">tr(R)=cos\theta tr(I)+(1-cos\theta)tr(\vec n \vec n^T)+sin\theta tr(\vec n^{\wedge})
</script></span>
<span class="math"><script type="math/tex; mode=display">=3cos\theta +(1-cos\theta)
</script></span>
<span class="math"><script type="math/tex; mode=display">=1+2cos\theta
</script></span>
<p>因此</p>
<span class="math"><script type="math/tex; mode=display">\theta=arccos(\frac{tr(R)-1}{2}) 
</script></span>
<p><em>注： <span class="math"><script type="math/tex">tr(N)</script></span>，表示求矩阵 <span class="math"><script type="math/tex">N</script></span>的主对角元素之和。<span class="math"><script type="math/tex">tr(I)=3</script></span>，因为由于前面旋转矩阵推导可知，<span class="math"><script type="math/tex">R</script></span>是3*3矩阵。 <span class="math"><script type="math/tex">\vec n^{\wedge}</script></span> 是对角线为0的反对称矩阵，所以 <span class="math"><script type="math/tex">tr(\vec n^{\wedge})=0</script></span>。</em></p>
<p>关于转轴 <span class="math"><script type="math/tex">\vec n</script></span>，由于旋转前后旋转轴不发生变化，所以</p>
<span class="math"><script type="math/tex; mode=display">R\vec n=\vec n
</script></span>
<h3>李群</h3>
<p>李群的主要核心是表述连续变化的特性。变换矩阵包含的实际意义就是旋转和平移，所以肯定是连续的。故旋转矩阵和变换矩阵都是李群的一种，分别是特殊正交群和特殊欧式群。</p>
<h3>李代数</h3>
<h4><span class="math"><script type="math/tex">so(3)</script></span></h4>
<p>我们知道旋转矩阵的一个性质</p>
<span class="math"><script type="math/tex; mode=display">RR^T=I
</script></span>
<p>它是有时间意义的，随着时间不断的变化，所以可以写成对时间的函数：<span class="math"><script type="math/tex">R(t)</script></span></p>
<span class="math"><script type="math/tex; mode=display">R(t)R(t)^T=I
</script></span>
<p>对时间<span class="math"><script type="math/tex">t</script></span>进行求导</p>
<span class="math"><script type="math/tex; mode=display">\dot{R}(t)R(t)^T+\dot{R}(t)^TR(t)=0
</script></span>
<span class="math"><script type="math/tex; mode=display">\dot{R}(t)R(t)^T=-\dot{R}(t)^TR(t)
</script></span>
<span class="math"><script type="math/tex; mode=display">\dot{R}(t)R(t)^T=-(\dot{R}(t)R(t)^T)^T
</script></span>
<p>所以 <span class="math"><script type="math/tex">\dot{R}(t)R(t)^T</script></span> 是反对称矩阵。由前面介绍查积所知，向量到矩阵就是一个反对称矩阵。</p>
<span class="math"><script type="math/tex; mode=display">\vec a^{\wedge}=A=\begin{bmatrix}
0&-a_{3}&a_{2}\\
a_{3}&0&-a_{1}\\
-a_{2}&a_{1}&0\\
\end{bmatrix}, \ \ A^{\wedge}=\vec a</script></span>
<p>所以 <span class="math"><script type="math/tex">\dot{R}(t)R(t)^T</script></span> 必然对应一个向量 <span class="math"><script type="math/tex">\phi(t)^\wedge</script></span>。</p>
<p>于是</p>
<span class="math"><script type="math/tex; mode=display">\dot R(t)R(t)^T=\phi(t)^\wedge
</script></span>
<p>右乘一个<span class="math"><script type="math/tex">R(t)</script></span>。</p>
<span class="math"><script type="math/tex; mode=display">\dot R(t)=\phi(t)^\wedge R(t)
</script></span>
<p>当 <span class="math"><script type="math/tex">t_0=0</script></span>时，则还未开始旋转，所以 <span class="math"><script type="math/tex">R(t_0)=I</script></span>。 由一阶泰勒展开得：</p>
<span class="math"><script type="math/tex; mode=display">R(t)\approx R(t_0)+\dot{R}(t_0)(t-t_0)
</script></span>
<p>将上式带入</p>
<span class="math"><script type="math/tex; mode=display">=I+\phi(t_0)^\wedge R(t_0)t
</script></span>
<span class="math"><script type="math/tex; mode=display">=I+\phi(t_0)^\wedge t
</script></span>
<p><em>我们看到 <span class="math"><script type="math/tex">\phi</script></span> 反映了 <span class="math"><script type="math/tex">R</script></span> 的导数性质，故称它在SO(3)原点附近的正切空间上。引用书上原话，我不是很明白</em></p>
<p>由齐次微分方程性质（<em><span class="math"><script type="math/tex">y'+p(x)y=0</script></span>，通解为<span class="math"><script type="math/tex">y=Ce^{-\int p(x)dx}</script></span></em>）得</p>
<span class="math"><script type="math/tex; mode=display">\dot R(t)=\phi(t)^\wedge R(t)
</script></span>
<p>通解<span class="math"><script type="math/tex">R(t)=Ce^{\phi(t)^\wedge}</script></span></p>
<p>由于初始值<span class="math"><script type="math/tex">R(0)=I</script></span>,我们考虑的是<span class="math"><script type="math/tex">t_0=0</script></span>时，此时 <span class="math"><script type="math/tex">\phi(t_0)^\wedge</script></span> 为常数，故简化 <span class="math"><script type="math/tex">\phi(t_0)^\wedge</script></span>为 <span class="math"><script type="math/tex">\phi_0</script></span>所以其特解为</p>
<span class="math"><script type="math/tex; mode=display">\phi(0)^\wedge=0,\ C=I
</script></span>
<span class="math"><script type="math/tex; mode=display">R(t)=e^{\phi_0^\wedge t}
</script></span>
<p>对其换种写法也即</p>
<span class="math"><script type="math/tex; mode=display">R(t)=exp(\phi_0^\wedge t)
</script></span>
<span class="math"><script type="math/tex; mode=display">\Phi=\phi^\wedge=\begin{bmatrix}0&-\phi_3&\phi_2\\\phi_3&0&-\phi_1\\-\phi_2&\phi_1&0\end{bmatrix}\in\mathbb{R}^{3\times 3} 
</script></span>
<p>一般我们说 $so(3)$的元素是3维向量或者3维反对称矩阵。</p>
<span class="math"><script type="math/tex; mode=display">so(3)=\begin{Bmatrix} \phi \in \mathbb{R}^3, \Phi=\phi^\wedge \in \mathbb{R}^{3\times 3} \end{Bmatrix}
</script></span>
<p>与$SO(3)$的关系对应为</p>
<span class="math"><script type="math/tex; mode=display">R=exp(\phi^\wedge)
</script></span>
<h4><span class="math"><script type="math/tex">se(3)</script></span></h4>
<p>同理我们可以推导</p>
<span class="math"><script type="math/tex; mode=display">se(3)=\begin{Bmatrix}\xi=\begin{bmatrix}\rho \\ \phi \end{bmatrix}\in \mathbb{R}^6,\ \rho \in \mathbb{R}^3,\ \phi \in so(3),\ \xi^\wedge=\begin{bmatrix}\phi^\wedge & \rho\\0^T&1 \end{bmatrix} \in \mathbb{R}^{4\times 4}\end{Bmatrix}
</script></span>
<p>每个<span class="math"><script type="math/tex">se(3)</script></span> 的元素 <span class="math"><script type="math/tex">\xi</script></span>是六维向量，前三维是平移向量，记做 <span class="math"><script type="math/tex">\rho</script></span>。 后三维是旋转向量，记做 <span class="math"><script type="math/tex">\phi</script></span>。同时我们这里的 <span class="math"><script type="math/tex">\wedge</script></span>不再单纯表示向量到反对称矩阵，而是向量到矩阵的转换， <span class="math"><script type="math/tex">\vee</script></span>表示矩阵到向量的转换。</p>
<h3><span class="math"><script type="math/tex">SO(3)=R=\phi^\wedge</script></span> 指数映射</h3>
<p>由于 <span class="math"><script type="math/tex">\phi</script></span>是三维向量，我们可以换种方式来定义它，通过模长 <span class="math"><script type="math/tex">\vec a</script></span> 和方向 <span class="math"><script type="math/tex">\theta</script></span>，这里 <span class="math"><script type="math/tex">\vec a</script></span>是长度为1的方向向量，对于 <span class="math"><script type="math/tex">a^\wedge</script></span>(后面我们不说明的情况下<span class="math"><script type="math/tex">a</script></span>就是 <span class="math"><script type="math/tex">\vec a</script></span>)，有以下两个性质:</p>
<p><em>PS:这是人家前人发现的，我们直接用就行了</em></p>
<span class="math"><script type="math/tex; mode=display">a^\wedge a^\wedge=aa^T-I
</script></span>
<span class="math"><script type="math/tex; mode=display">a^\wedge a^\wedge a^\wedge=-a^\wedge
</script></span>
<p><em>本文通过假设 <span class="math"><script type="math/tex">a^\wedge=\begin{bmatrix}0&-\frac{1}{\sqrt{3}}&\frac{1}{\sqrt{3}} \\ \frac{1}{\sqrt{3}}&0&-\frac{1}{\sqrt{3}} \\ -\frac{1}{\sqrt{3}}&\frac{1}{\sqrt{3}}&0\end{bmatrix}</script></span>，强行往里带入可以验证上述性质成立</em></p>
<p>由麦克劳林公式得</p>
<span class="math"><script type="math/tex; mode=display">exp(x)=\sum_{k=0}^{\infty }\frac {1}{k!}x^n
</script></span>
<span class="math"><script type="math/tex; mode=display">sinx=\sum_{k=1}^{\infty }(-1)^{k-1}\frac {1}{(2k-1)!}x^{2k-1}=x-\frac{1}{3!}x^3+\frac{1}{5!}x^5...
</script></span>
<span class="math"><script type="math/tex; mode=display">cosx=\sum_{k=0}^{\infty }(-1)^k\frac {1}{2k!}x^{2k}=1-\frac{1}{2!}x^2+\frac{1}{4!}x^4+...
</script></span>
<span class="math"><script type="math/tex; mode=display">exp(\phi^{\wedge})=\sum_{n=0}^{\infty }\frac {1}{n!}(\phi^{\wedge})^n
</script></span>
<p>由上式得</p>
<span class="math"><script type="math/tex; mode=display">exp(\theta a^{\wedge})=\sum_{n=0}^{\infty }\frac {1}{n!}(\theta a^{\wedge})^n
</script></span>
<span class="math"><script type="math/tex; mode=display">=I+\theta a+\frac {1}{2!}\theta^2 a^{\wedge}a^{\wedge}+\frac {1}{3!}\theta^3a^{\wedge}a^{\wedge}a^{\wedge}+\frac {1}{4!}\theta^4a^{\wedge}a^{\wedge}a^{\wedge}a^{\wedge}+...
</script></span>
<p>将上式关于 <span class="math"><script type="math/tex">a^{\wedge}</script></span> 的次方推导公式，带入</p>
<span class="math"><script type="math/tex; mode=display">=I+\theta a+\frac {1}{2!}\theta^2 a^{\wedge}a^{\wedge}-\frac {1}{3!}\theta^3a^{\wedge}-\frac {1}{4!}\theta^4a^{\wedge}a^{\wedge}+\frac {1}{5!}\theta^5a^{\wedge}+\frac {1}{6!}\theta^6a^{\wedge}a^{\wedge}...
</script></span>
<span class="math"><script type="math/tex; mode=display">=aa^T+(\theta-\frac{1}{3!}\theta^3+\frac{1}{5!}\theta^5-\frac{1}{7!}\theta^7+...)a^{\wedge}-(1-\frac{1}{2!}\theta^2+\frac{1}{4!}\theta^4-\frac{1}{6!}\theta^6+...)a^{\wedge}a^{\wedge}
</script></span>
<span class="math"><script type="math/tex; mode=display">=a^{\wedge}a^{\wedge}+I+sin{\theta}a^{\wedge}-cos{\theta}a^{\wedge}a^{\wedge}
</script></span>
<span class="math"><script type="math/tex; mode=display">=(1-cos{\theta})a^{\wedge}a^{\wedge}+I+sin\theta a^{\wedge}
</script></span>
<span class="math"><script type="math/tex; mode=display">=cos\theta I+(1-cos\theta)aa^T+sin\theta a^{\wedge}
</script></span>
<h3><span class="math"><script type="math/tex">SE(3)=T=exp(\xi^\wedge)</script></span> 指数映射</h3>
<span class="math"><script type="math/tex; mode=display">exp(\xi^\wedge)=\begin{bmatrix}exp(\phi^{\wedge})&exp(\rho)\\ 0^T&0    \end{bmatrix}=\begin{bmatrix}\sum_{n=0}^{\infty }\frac {1}{n!}(\phi^{\wedge})^n&\sum_{n=0}^{\infty }\frac {1}{n!}(\rho)^n\\ 0^T&1\end{bmatrix}
</script></span>
<span class="math"><script type="math/tex; mode=display">=\begin{bmatrix}\sum_{n=0}^{\infty }\frac {1}{n!}(\phi^{\wedge})^n&\sum_{n=0}^{\infty }\frac {1}{(n+1)!}(\phi^{\wedge})^n\rho\\ 0^T&1\end{bmatrix}
</script></span>
<span class="math"><script type="math/tex; mode=display">=\begin{bmatrix}R&J\rho\\ 0^T&1\end{bmatrix}=T
</script></span>
<p>即</p>
<span class="math"><script type="math/tex; mode=display">J=\sum_{n=0}^{\infty }\frac {1}{(n+1)!}(\phi^{\wedge})^n
</script></span>
<p>按照之前推导<span class="math"><script type="math/tex">exp(\phi^{\wedge})</script></span> 的思路，将<span class="math"><script type="math/tex">a^{\wedge}</script></span> 平方和立方的计算规律带入得：</p>
<span class="math"><script type="math/tex; mode=display">J=\frac{sin\theta}{\theta}I+(1-\frac{sin\theta}{\theta})aa^T+\frac{(1-cos\theta)}{\theta}a^{\wedge}
</script></span>
<p>图像像素灰度在k的时刻表示为I_k:Ω⊂R^2⊢R， 其中Ω是图像的整个域（二维的）。任意3维点p  在可见的场景表面S⊂R^3，通过相机投影模型 映射到图像的坐标</p>
<p>其中，前注k表示在k时刻相机框架点坐标的表示。投影函数π由相机内参（由校准之后得到）决定。3维点可以由图像坐标u恢复，不过需要给定反向投影函数π-1和深度</p>
<h4>总结下李群、李代数之间的关系</h4>
<p>李群是一个矩阵(R，T)，李代数是一个向量 <span class="math"><script type="math/tex">\phi</script></span>，<span class="math"><script type="math/tex">\xi</script></span>，每个李代数都可以对应一个反对称矩阵 <span class="math"><script type="math/tex">\phi^{\wedge}</script></span>，<span class="math"><script type="math/tex">\xi^{\wedge}</script></span>，同时我们对这个反对称矩阵求指数就是李群了。也即：</p>
<span class="math"><script type="math/tex; mode=display">exp(\phi^{\wedge})=R
</script></span>
<span class="math"><script type="math/tex; mode=display">exp(\xi^{\wedge})=T
</script></span>
<h3>为什么要提出李群，李代数</h3>
<p>李群为了更好的描述相机的运动，李代数是为了进一步更好的计算李群（单纯的李群是不容易直接进行数学运算的）</p>
<p>假设我们知道一个世界坐标系上的点p（路标点），运动了T之后，它的观测量为z，则理论上：</p>
<span class="math"><script type="math/tex; mode=display">z=Tp
</script></span>
<p>然而我们知道真实情况系必然存在误差，所以应该是</p>
<span class="math"><script type="math/tex; mode=display">z=Tp+w
</script></span>
<p>我们通常比较想知道计算理想和真实情况下的误差，使其最小</p>
<span class="math"><script type="math/tex; mode=display">e=z-Tp
</script></span>
<p>假设我们有N个观测点和路标点，则</p>
<span class="math"><script type="math/tex; mode=display">minJ(T)=\sum_{i=1}^{N}\left \| z_i-Tp_i \right \|_{2}^{2}
</script></span>
<p>我们的目标就是求<span class="math"><script type="math/tex">T</script></span>，使得整体误差<span class="math"><script type="math/tex">J</script></span>最小。</p>
<h4>BCH近似</h4>
<span class="math"><script type="math/tex; mode=display">exp(\phi_1^{\wedge})exp(\phi_2^{\wedge})=exp(J_l^{-1}\phi_1+\phi_2), \ \phi_1微小
</script></span>
<span class="math"><script type="math/tex; mode=display">exp(\phi_1^{\wedge})exp(\phi_2^{\wedge})=exp(J_r^{-1}\phi_2+\phi_1), \ \phi_2微小
</script></span>
<p>其中<span class="math"><script type="math/tex">J_l=J=\frac{sin\theta}{\theta}I+(1-\frac{sin\theta}{\theta})aa^T+\frac{1-cos\theta}{\theta}a^{\wedge}</script></span>，它的逆</p>
<span class="math"><script type="math/tex; mode=display">J_l^{-1}=J^{-1}=\frac{\theta}{2}cot\frac{\theta}{2}I+(1-\frac{\theta}{2}cot\frac{\theta}{2})aa^T+\frac{\theta}{2}a^{\wedge}
</script></span>
<p>右乘雅克比仅需要对自变量取符号即可：</p>
<span class="math"><script type="math/tex; mode=display">J_r(\phi)=J_l(-\phi)
</script></span>
<p>将 <span class="math"><script type="math/tex">\phi_1^{\wedge}</script></span> 与<span class="math"><script type="math/tex">J_l^{-1}\phi_1</script></span>对应，所以 <span class="math"><script type="math/tex">\phi_1</script></span>与 <span class="math"><script type="math/tex">(J_l\phi_1)^{\wedge}</script></span> 对应。即：</p>
<span class="math"><script type="math/tex; mode=display">exp((\phi_1+\phi_2)^{\wedge})=exp((J_l\phi_1)^{\wedge})exp(\phi_2^{\wedge}), \ \phi_1微小
</script></span>
<span class="math"><script type="math/tex; mode=display">exp((\phi_1+\phi_2)^{\wedge})=exp((J_r\phi_2)^{\wedge})exp(\phi_1^{\wedge}), \ \phi_2微小
</script></span>
<h4>李代数求导</h4>
<span class="math"><script type="math/tex; mode=display">\frac{\partial{Rp}}{\partial{R}}=\frac{\partial{(exp(\phi^{\wedge})p)}}{\partial{R}} 
</script></span>
<p>由导数定义可知</p>
<span class="math"><script type="math/tex; mode=display">\frac{\partial{(exp(\phi^{\wedge})p)}}{\partial{\phi}}=\lim_{\xi \phi\rightarrow 0}\frac{exp((\phi+\xi\phi)^{\wedge})p-exp(\phi^{\wedge})p}{\xi \phi}
</script></span>
<span class="math"><script type="math/tex; mode=display">=\lim_{\xi \phi\rightarrow 0}\frac{exp((J_l\xi\phi)^{\wedge})exp(\phi^{\wedge})p-exp(\phi^{\wedge})p}{\xi \phi}
</script></span>
<span class="math"><script type="math/tex; mode=display">=\lim_{\xi \phi\rightarrow 0}\frac{(I+(J_l\xi\phi)^{\wedge})exp(\phi^{\wedge})p-exp(\phi^{\wedge})}{\xi \phi}
</script></span>
<span class="math"><script type="math/tex; mode=display">=\lim_{\xi \phi\rightarrow 0}\frac{(J_l\xi\phi)^{\wedge}exp(\phi^{\wedge})p}{\xi \phi}
</script></span>
<p>从叉积公式得 <span class="math"><script type="math/tex">\vec a\times \vec b=a^{\wedge}b=-ab^{\wedge}</script></span></p>
<span class="math"><script type="math/tex; mode=display">=\lim_{\xi \phi\rightarrow 0}\frac{-(exp(\phi^{\wedge})p)^{\wedge}(J_l\xi\phi)}{\xi \phi}
</script></span>
<span class="math"><script type="math/tex; mode=display">=-(Rp)^{\wedge}J_l
</script></span>
<p>自此，我们推导出旋转后的点相对于李代数的导数：</p>
<span class="math"><script type="math/tex; mode=display">\frac{\partial{Rp}}{\partial{\phi}}=-(Rp)^{\wedge}J_l
</script></span>
<h4>扰动模型（左乘）</h4>
<span class="math"><script type="math/tex; mode=display">\frac{\partial{Rp}}{\partial{R}}=\lim_{
\varphi \rightarrow 0}\frac{exp(\varphi ^{\wedge})exp(\phi^{\wedge})p-exp(\phi^{\wedge})p}{\varphi}</script></span>
<span class="math"><script type="math/tex; mode=display">\approx \lim_{
\varphi \rightarrow 0}\frac{(1+\varphi^{\wedge})exp(\phi^{\wedge})p-exp(\phi^{\wedge})p}{\varphi}</script></span>
<span class="math"><script type="math/tex; mode=display">=\lim_{
\varphi \rightarrow 0}\frac{\varphi^{\wedge}exp(\phi^{\wedge})p}{\varphi}</script></span>
<span class="math"><script type="math/tex; mode=display">=\lim_{
\varphi \rightarrow 0}\frac{-(exp(\phi^{\wedge})p)^{\wedge}\varphi}{\varphi}</script></span>
<span class="math"><script type="math/tex; mode=display">=-(Rp)^{\wedge}
</script></span>
<h3>SE(3)</h3>
<p>其中， 是已知深度域
相机的位置和方向在k时刻用刚体变换 表示 SE(3)
我们可以映射一个3D点从世界坐标框架到参考相机框架
Tk,w就是上面说的外参，
两个连续帧直接相关变化可以用 计算
在优化过程中，我们需要最小的表示变化，因此，使用李代数se(3) 对应恒等于正切空间SE(3)。我们用代数元素ξ=〖(ω,υ)〗^T∈R^6表示旋转坐标，其中w是角速度和v线性速度。旋转坐标ξ用指数映射到SE(3)</p>
<h2>对极约束</h2>
<span class="math"><script type="math/tex; mode=display">s_{1}p_{1}=KP \ \ \ s_{2}p_{2}=K(RP+t)
</script></span>
<p><span class="math"><script type="math/tex">s_{1}</script></span> 是一个数值，表示距离</p>
<p>对其进行归于化，得</p>
<span class="math"><script type="math/tex; mode=display">p_{1}=KP \ \ \ p_{2}=K(RP+t)
</script></span>
<p>记</p>
<span class="math"><script type="math/tex; mode=display">x_{1}=K^{-1}p_{1} \ \ \ \ x_{2}=K^{-1}p_{2}
</script></span>
<span class="math"><script type="math/tex; mode=display">x_{2}=Rx_{1}+t
</script></span>
<p>两边同时乘以<span class="math"><script type="math/tex">t^{\wedge}</script></span>，由于<span class="math"><script type="math/tex">t^{\wedge}t=0</script></span></p>
<span class="math"><script type="math/tex; mode=display">t^{\wedge}x_{2}=t^{\wedge}Rx_{1}
</script></span>
<p>两边同时乘以<span class="math"><script type="math/tex">x_{2}^{T}</script></span></p>
<span class="math"><script type="math/tex; mode=display">x_{2}^{T}t^{\wedge}x_{2}=x_{2}^{T}t^{\wedge}Rx_{1}
</script></span>
<p>由于向量也是一维矩阵，所以左边满足矩阵乘法结合律</p>
<span class="math"><script type="math/tex; mode=display">(AB)C=A(BC)
</script></span>
<p>由于<span class="math"><script type="math/tex">t^{\wedge}x_{2}</script></span> 是垂直于<span class="math"><script type="math/tex">t</script></span> 和 <span class="math"><script type="math/tex">x_{2}</script></span> 的向量（一维矩阵），所以左边等0，即</p>
<span class="math"><script type="math/tex; mode=display">x_{2}^{T}t^{\wedge}Rx_{1}=0
</script></span>
<p>将上面的<span class="math"><script type="math/tex">x_{1},x_{2}</script></span> 代入</p>
<span class="math"><script type="math/tex; mode=display">p_{2}^{T}K^{-T}t^{\wedge}RK^{-1}p_{1}=0
</script></span>
<p>令<span class="math"><script type="math/tex">E=t^{\wedge}R</script></span>(本质矩阵)，<span class="math"><script type="math/tex">F=K^{-T}EK^{-1}</script></span>（基础矩阵）</p>
<p>故</p>
<span class="math"><script type="math/tex; mode=display">x_{2}^{T}Ex_{1}=0, \ p_{2}^{T}Fp_{1}=0
</script></span>
<p>根据特征点匹配求出<span class="math"><script type="math/tex">E</script></span>，从中分解出<span class="math"><script type="math/tex">R 和 t</script></span> 出来即可
由E的性质可知，E为3*3的矩阵</p>
<p>对于任意的一对匹配点<span class="math"><script type="math/tex">x_{1}=[u_{1}, v_{1}, 1]^{T},x_{2}=[u_{2}, v_{2}, 1]^{T}</script></span></p>
<span class="math"><script type="math/tex; mode=display">x_{2}^{T}Ex_{1}=0
</script></span>
<span class="math"><script type="math/tex; mode=display">\begin{bmatrix}
u_{2} & v_{2} & 1
\end{bmatrix}\begin{bmatrix}
e_{1} & e_{2} & e_{3}\\
e_{4} & e_{5} & e_{6}\\
e_{7} & e_{8} & e_{9}
\end{bmatrix}\begin{bmatrix}
u_{1}\\
v_{1}\\
1
\end{bmatrix}=0</script></span>
<p>由矩阵乘法结合律</p>
<span class="math"><script type="math/tex; mode=display">\begin{bmatrix}
u_{2} & v_{2} & 1
\end{bmatrix}\begin{bmatrix}
u_{1}\\
v_{1}\\
1
\end{bmatrix}\begin{bmatrix}
e_{1} & e_{2} & e_{3}\\
e_{4} & e_{5} & e_{6}\\
e_{7} & e_{8} & e_{9}
\end{bmatrix}=0</script></span>
<p>将<span class="math"><script type="math/tex">E</script></span>写成向量的形式</p>
<span class="math"><script type="math/tex; mode=display">e=[e_{1}, e_{2}, e_{3}, e_{4}, e_{5}, e_{6}, e_{7}, e_{8}, e_{9}]^{T}
</script></span>
<p>上式可以写成</p>
<span class="math"><script type="math/tex; mode=display">[u_{1}u_{2}, u_{2}v_{1}, u_{2}, v_{2}u_{1}, v_{1}v_{2}, v_{2}, u_{1}, v_{1}, 1]e=0
</script></span>
<p>对于其他特征点也有同样的性质</p>
<span class="math"><script type="math/tex; mode=display">\begin{bmatrix}
 u_{1}^{1}u_{2}^{1}& u_{2}^{1}v_{1}^{1}& u_{2}^{1}& v_{2}^{1}u_{1}^{1}& v_{1}^{1}v_{2}^{1}& v_{2}^{1}& u_{1}^{1}& v_{1}^{1}& 1\\
 u_{1}^{2}u_{2}^{2}& u_{2}^{2}v_{1}^{2}& u_{2}^{2}& v_{2}^{2}u_{1}^{2}& v_{1}^{2}v_{2}^{2}& v_{2}^{2}& u_{1}^{2}& v_{1}^{2}& 1\\
 \vdots & \vdots & \vdots & \vdots & \vdots & \vdots & \vdots & \vdots & 1\\
 u_{1}^{8}u_{2}^{8}& u_{2}^{8}v_{1}^{8}& u_{2}^{8}& v_{2}^{8}u_{1}^{8}& v_{1}^{8}v_{2}^{8}& v_{2}^{8}& u_{1}^{8}& v_{1}^{8}& 1\\
\end{bmatrix}\begin{bmatrix}
 e_{1}\\
 e_{2}\\
 e_{3}\\
 e_{4}\\
 e_{5}\\
 e_{6}\\
 e_{7}\\
 e_{8}\\
 e_{9}
\end{bmatrix}=0</script></span>
<h2>光束平差法(Bundle Ajustment)</h2>
<p>我们通过特征匹配的方式，已经可以到N组特征点</p>
<span class="math"><script type="math/tex; mode=display">z_{1}=\begin{Bmatrix}
z_{1}^{1},z_{1}^{2}....,z_{1}^{N}
\end{Bmatrix},z_{2}=\begin{Bmatrix}
z_{2}^{1},z_{2}^{2}....,z_{2}^{N}
\end{Bmatrix}</script></span>
<p>其中<span class="math"><script type="math/tex">z_{i}^{j}</script></span> 下标是指第几帧图，上标表示第几个特征点，其在图像上的坐标为 <span class="math"><script type="math/tex">z_{i}^{j}=\left [ u,v \right ]_{i}^{j}</script></span></p>
<p><img src="D:\Interest\Utilities\MarkdownSpace\camera.png?v=1521429066616" alt=""><br>
上图模型表示为相机在1处，2处分别观测空间中X点位置。</p>
<span class="math"><script type="math/tex; mode=display">\lambda_{1}\begin{bmatrix}
z_{1}^{j}\\
1
\end{bmatrix}=CX^{j},\lambda_{2}\begin{bmatrix}
z_{2}^{j}\\
1
\end{bmatrix}=C\left ( RX^{j}+t \right )
</script></span>
<p>其中 <span class="math"><script type="math/tex">\lambda_{1},\lambda_{2}</script></span> 表示像素深度值，也就是相机的z坐标。正常的思路就行，两个公式约掉 <span class="math"><script type="math/tex">X^{j}</script></span> ，使用对极约束和SVD分解，理论上我们需要8个点就可以解算出来<span class="math"><script type="math/tex">R, t</script></span>，这是常规思路，我们这里主要介绍图优化。
我们尝试构造一个优化问题
由于存在着精度误差，所以 <span class="math"><script type="math/tex">\left \| \frac{1}{\lambda_{1}}CX^{j}-\left [ z_{1}^{j},1 \right ]^{T}  \right \|^{2}，\left \| \frac{1}{\lambda_{2}}C(RX^{j}+t)-\left [ z_{2}^{j},1 \right ]^{T}  \right \|^{2}</script></span> 不可能都为0，所以我们只能通过调整 <span class="math"><script type="math/tex">R,t</script></span> 来使他们的误差尽量下。</p>
<p>所以可以构造一个最优化问题，调整<span class="math"><script type="math/tex">R,t</script></span>使得对于所有的特征点<span class="math"><script type="math/tex">z^{j}</script></span>，误差二范数累计最小，也即</p>
<span class="math"><script type="math/tex; mode=display">min_{X,R,t}\sum_{j=1}^{N}\left \| \frac{1}{\lambda_{1}}CX^{j}-\left [ z_{1}^{j},1 \right ]^{T}  \right \|^{2} + \left \| \frac{1}{\lambda_{2}}C(RX^{j}+t)-\left [ z_{2}^{j},1 \right ]^{T}  \right \|^{2}
</script></span>
<p>这个就是最小化重投影误差问题（minimizaiton of reprojection error），实际操作中，我们在调整每个<span class="math"><script type="math/tex">X^{j}</script></span>，使得更符合每一次观测<span class="math"><script type="math/tex">z^{j}</script></span>，也就是每个误差项都尽量小。由于这个原因，所以他也叫捆绑调整（Bundle Adjustment）。</p>
<p>BA很容易描述成图优化形式。图的结点为</p>
<ul>
<li>
<p>相机的位置位姿：一个SE(3)的元素</p>
</li>
<li>
<p>空间中的特征点：是个XYZ坐标</p>
</li>
</ul>
<p>边主要是有空间点到像素坐标的投影关系。也就是</p>
<span class="math"><script type="math/tex; mode=display">\lambda_{2}\begin{bmatrix}
z_{2}^{j}\\
1
\end{bmatrix}=C\left ( RX^{j}+t \right )</script></span>
<p><em>注：向量转置与其本身实质和意义都是一样的，与矩阵不同</em></p>
<h2>g2o</h2>
<p>其主要步骤如下：</p>
<ol>
<li>选择一个线性方程求解器，从 PCG, CSparse, Choldmod中选，实际则来自 g2o/solvers 文件夹中定义的文件夹。</li>
</ol>
<p><img src="D:\Interest\Utilities\MarkdownSpace\solvers.png?v=1521429066617" alt=""></p>
<pre class="editor-colors lang-//"><div class="line"><span class="syntax--text syntax--plain syntax--null-grammar"><span>g2o::BlockSolver_6_3::LinearSolverType*&nbsp;linearSolver&nbsp;=&nbsp;new&nbsp;&nbsp;g2o::LinearSolverCholmod&lt;g2o::BlockSolver_6_3::PoseMatrixType&gt;&nbsp;();</span></span>
</div></pre>
<ol start="2">
<li>选择一个 BlockSolver。</li>
</ol>
<pre class="editor-colors lang-//"><div class="line"><span class="syntax--text syntax--plain syntax--null-grammar"><span>g2o::BlockSolver_6_3*&nbsp;block_solver&nbsp;=&nbsp;new&nbsp;g2o::BlockSolver_6_3(&nbsp;linearSolver&nbsp;);</span></span>
</div></pre>
<ol start="3">
<li>选择一个迭代策略，从GN, LM, Doglog中选。</li>
</ol>
<pre class="editor-colors lang-//"><div class="line"><span class="syntax--text syntax--plain syntax--null-grammar"><span>g2o::OptimizationAlgorithmLevenberg*&nbsp;algorithm&nbsp;=&nbsp;new&nbsp;g2o::OptimizationAlgorithmLevenberg(&nbsp;block_solver&nbsp;);</span></span>
</div></pre>
<ol start="4">
<li>构造结点和边</li>
</ol>
<p>结点，空间中的点和位姿，边是有空间中的点跟像素坐标的投影关系</p>
<h4>测试BA和对级约束求解(详见ubuntu虚拟机的代码)</h4>
<p><em>对极约束</em></p>
<span class="math"><script type="math/tex; mode=display"> R=\begin{bmatrix}
0.9989066940689537 & -0.01520945268654653 & 0.04420507994800801\\
0.01389019427348682 & 0.9994533963165625 & 0.02999951823502051\\
-0.04463719354169673 & -0.02935270243545288 & 0.9985719502431745
 \end{bmatrix}, t=\begin{bmatrix}
 -0.287181547543988\\
  -0.1877533687454072\\
  -0.9392951779259762
\end{bmatrix}</script></span>
<p><em>BA</em></p>
<span class="math"><script type="math/tex; mode=display">R=\begin{bmatrix}
0.999959 & -0.00778231 & -0.00471191\\
 0.0079586 & 0.999222 & 0.0386278\\
0.00440763 & -0.0386637 & 0.999243
 \end{bmatrix}, t=\begin{bmatrix}
0.046212\\
-0.00945899\\
-0.00141173
 \end{bmatrix}
</script></span>
<h3>最小光度误差</h3>
<p>直接法主要根据灰度不变性假设进行实验，所以我们要实现最小光度误差
等价于一个空间中的点，在两个不同位置上的相机投影产生的光度理论上是应该一致，所以整个最小化光度误差公式应由灰度方程组成。即</p>
<span class="math"><script type="math/tex; mode=display">e=I_{1}(p_{1})-I_{2}(p_{2}),

\min_{\xi}J(\xi)=e^{T}e
</script></span>
<p><span class="math"><script type="math/tex">\xi</script></span>为相机变换李代数，不断调整相机位姿使得<span class="math"><script type="math/tex">e</script></span>的二范数值最小，这就是整个最小光度误差的原理。</p>
<p>由前面的投影方程可知</p>
<span class="math"><script type="math/tex; mode=display">p_{1}=\begin{bmatrix}
u\\
v
\end{bmatrix}_{1}=D\frac{1}{Z_{1}}KP,p_{2}=\begin{bmatrix}
u\\
v
\end{bmatrix}_{2}=D\frac{1}{Z_{2}}K(RP+t)=D\frac{1}{Z_{2}}Kexp(\xi^\wedge)P
</script></span>
<p>其中D是齐次到非齐次的转换</p>
<span class="math"><script type="math/tex; mode=display">D=\begin{bmatrix}
1&0&0\\
0&1&0
\end{bmatrix}
</script></span>
<p>因为空间中可能有许多类似于上述的三维点，所以构成了一个累和公式</p>
<span class="math"><script type="math/tex; mode=display">\min_{\xi}J(\xi)=\sum_{i=1}^{N}e_{i}^{T}e_{i},e_{i}=I_{1}(p_{1,i})-I_{2}(p_{2,i})
</script></span>
<p>既然要求最小值，所以一般我们先考虑其导数的情况，对于 <span class="math"><script type="math/tex">\min_{\xi}J(\xi)</script></span> 的最小值，等价于求 <span class="math"><script type="math/tex">e_{i}</script></span> 最小值，一般来说，我们想要求最小值先分析其导数比较合适，但是$e_{i}$不便对其进行求导，所以我们采用最基本的导数公式</p>
<span class="math"><script type="math/tex; mode=display">f^{'}(x_{0})=\frac{f(x_{0}+\Delta x)-f(x_{0})}{\Delta x}
</script></span>
<p>所以我们对 <span class="math"><script type="math/tex">e_{i}</script></span> 加个扰动量，即</p>
<span class="math"><script type="math/tex; mode=display">e(\xi \oplus \delta \xi )\\
=I_{1}(\frac{1}{Z_{1}}DKP)-I_{2}(\frac{1}{Z_{2}}DKexp(\delta\xi^\wedge)exp(\xi^\wedge)P)\\
\approx I_{1}(\frac{1}{Z_{1}}DKP)-I_{2}(\frac{1}{Z_{2}}DK(1+\delta\xi^\wedge)exp(\xi^\wedge)P)\\
=I_{1}(\frac{1}{Z_{1}}DKP)-I_{2}(\frac{1}{Z_{2}}DKexp(\xi^\wedge)P)-I_{2}(\frac{1}{Z_{2}}DK\delta\xi^\wedge exp(\xi^\wedge)P)\\
=e(\xi)-I_{2}(\frac{1}{Z_{2}}DK\delta\xi^\wedge exp(\xi^\wedge)P)\\
</script></span>
<p>记， <span class="math"><script type="math/tex">q=\delta\xi^\wedge exp(\xi^\wedge)P</script></span>，<span class="math"><script type="math/tex">u=\frac{1}{Z_{2}}DKq</script></span> 所以，上式一阶泰勒展开等于</p>
<span class="math"><script type="math/tex; mode=display">e(\xi \oplus \delta \xi )\\
=e(\xi)-I_{2}(u)\\
\approx e(\xi)-\frac{\partial I_{2}}{\partial u}\frac{\partial u}{\partial q}\frac{\partial q}{\partial \delta\xi^\wedge}\delta\xi^\wedge
</script></span>
<p>第一个式子 <span class="math"><script type="math/tex">\frac{\delta I_{2}}{\mathbf{u}}</script></span> 是在 <span class="math"><script type="math/tex">\mathbf{u}</script></span> 处的像素梯度
第二个式子 <span class="math"><script type="math/tex">\frac{\delta \mathbf{u}}{\delta q}</script></span> 是投影方程关于相机坐标系下的三维点的导数。由前面的投影方程可知</p>
<span class="math"><script type="math/tex; mode=display">u=\frac{f_{x}X+c_{x}}{Z},v=\frac{f_{y}Y+c_{y}}{Z}
</script></span>
<p>于是，导数为</p>
<span class="math"><script type="math/tex; mode=display">\frac{\partial \mathbf{u}}{\partial q}=\begin{bmatrix}
\frac{\partial u}{\partial X} & \frac{\partial u}{\partial Y} & \frac{\partial u}{\partial Z}\\
\frac{\partial v}{\partial X} & \frac{\partial v}{\partial Y} & \frac{\partial v}{\partial Z}
\end{bmatrix}\\
=\begin{bmatrix}

\end{bmatrix}
</script></span>
<p>误差相对于李代数的雅克比矩阵</p>
<span class="math"><script type="math/tex; mode=display">J=\frac{\partial I_{2}}{\partial u}\frac{\partial u}{\partial \delta \xi }
</script></span>
<h2>2018.2.25</h2>
<h3>Sophus</h3>
<p>Li algebra
Eigen is a matrix operation library, including create Vector and Matrix</p>
<h3>Opencv</h3>
<p>Mat can from a image file, and it’s has many invariables, like rows, cols, channel_number</p>
<p>also, we learn PointCloud, its has a function <strong>push_back（）</strong>, which can storage class PointT, IsometryId, ImageDepth, and ImageColor</p>
<p>In addition, formation from pixel frame to 3D frame. However, real World Point must use 3D frame multiple SE(3). like this:</p>
<p><code>Eigen::Vector3d pointWorld = T ** point;</code></p>
<p><strong>this function can save pointcloud map</strong></p>
<p><code>pcl::io::savePCDFileBinary(&quot;map.pcd&quot;, **pointCloud);</code></p>
<h2>2018.2.26</h2>
<h3>point</h3>
<p>when we define a type point, like char* p, it means p is the type char of start address, as we all known each type has different bytes, float is 4 bytes, char is 1 bytes, each address is a bytes.</p>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>char&nbsp;var&nbsp;=&nbsp;&#39;s&#39;;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>int&nbsp;var&nbsp;=&nbsp;12;</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>char*&nbsp;p&nbsp;=&nbsp;&amp;var;&nbsp;&nbsp;//&nbsp;right</span></span></span>
</div></pre>
<p><code>*p = var is value, and p = &amp;var is address</code></p>
<h3>OptimizationAlgorithm</h3>
<h4>Guass-Newton</h4>
<span class="math"><script type="math/tex; mode=display">f(x+\Delta x)\approx f(x)+J(x)\Delta x. \\
\left \| f(x+\Delta x) \right \|_{2}^{2} \approx _{\Delta x}^{argmin}\frac{1}{2}\left \| f(x)+J(x)\Delta x \right \|_{2}^{2}.\\
=\frac{1}{2}(f(x)+J(x)\Delta x)^{T}(f(x)+J(x)\Delta x) \\
=\frac{1}{2}(\left \| f(x) \right \|_{2}^{2}+2f(x)J(x)^{T}\Delta x+\Delta x^{T}J(x)^{T}J(x)\Delta x)). \\
</script></span>
<p>对 <span class="math"><script type="math/tex">\Delta x</script></span>进行求导，并令其为零。
so,</p>
<span class="math"><script type="math/tex; mode=display">J(x)^{T}J(x)\Delta x=-f(x)J(x)^{T}
</script></span>
<p>将左侧定义为H，右侧定义为g</p>
<span class="math"><script type="math/tex; mode=display">H\Delta x=  g

</script></span>
<h4>Levenberg-Marquardt</h4>
<span class="math"><script type="math/tex; mode=display">_{\Delta x}^{min}\frac{1}{2}\left \| f(x_{k})+J(x_{k})\Delta x_{k}\right \|^{2}+\frac{\lambda}{2}\left \|D\Delta x\right \|^{2}.\\

(H+\lambda D^{T}D)\Delta x = g.\\
</script></span>
<p>we assume <span class="math"><script type="math/tex">D=I</script></span> so,</p>
<span class="math"><script type="math/tex; mode=display">(H+\lambda D^{T}D)\Delta x = g.\\
</script></span>
<h4>Eigen</h4>
<p>functions:</p>
<p><code>1. Identity()</code></p>
<p>solve identity matrix（单位矩阵）</p>
<p><code>2. transpose()</code></p>
<p>transposition of a matrix（矩阵的转置）</p>
<h4>g2o</h4>
<h3>2018.3.1</h3>
<h4>function: <code>img.at()</code></h4>
<p>for a single channel grey scale image, <em><a href="http://img.at">img.at</a>()</em> is get the value of intensity</p>
<p><code>Scalar intensity = img.at&lt;uchar&gt;(y, x)</code></p>
<p>when consider a 3 channel image with RGB color</p>
<pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>Vec3b&nbsp;intensity&nbsp;=&nbsp;img.at&lt;Vec3b&gt;(y,&nbsp;x);</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>uchar&nbsp;blue&nbsp;=&nbsp;intensity.val[0];</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>uchar&nbsp;green&nbsp;=&nbsp;intensity.val[1];</span></span></span>
</div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>uchar&nbsp;red&nbsp;=&nbsp;intensity.val[2];</span></span></span>
</div></pre>
<h4>struct DMatch</h4>
<p>Class for matching keypoint descriptors: query descriptor index, train descriptor index, train image index, and distance between descriptors.</p>
<h4>class KeyPoint</h4>
<p>Data structure for salient point detectors.</p>
<p><em>Point2f pt</em></p>
<p>coordinates of the keypoint</p>
<p>so, <code>keypoints[m.queryIdx].pt.y</code> is y direction coordinate.</p>
<h4>pixel2cam</h4>
<span class="math"><script type="math/tex; mode=display">Z=d
</script></span>
<span class="math"><script type="math/tex; mode=display">X=\frac{u-c_{x}}{f_{x}}Z
</script></span>
<span class="math"><script type="math/tex; mode=display">Y=\frac{u-c_{x}}{f_{x}}Z
</script></span>
<p>this forum is <strong>pixel2cam</strong></p>
<h3>2018.3.9</h3>
<h4>LK OpticalFlow</h4>
<p>it’s main function is tracking and match features. it saves more time with respect to tranditional feature methods. So, when it finish match features, then, we should use SVD, PnP, ICP.</p>
<p><strong>calcOpticalFlowPyrLK(prevImg, nextImg, prevPts, nextPts, status, erros)</strong></p>
<h4>Parameter:</h4>
<p>status – Output status vector. Each element of the vector is set to 1 if the flow for the corresponding features has been found. Otherwise, it is set to 0.</p>
<p><strong>简单说光流法是不是只做到了特征点跟踪的而已，等于替换了特征点法的特征点匹配那个步骤
如果要基于光流法得到相机的运动，是不是就需要继续补充PnP或者ICP，而且光流法如果想进一步使用BA原理进行计算运动的话，那是不是就是直接法的第一种，稀疏直接法</strong></p>
<h3>2018.3.14</h3>
<h4>OpticalFlow essence</h4>
<ol>
<li>extract features with fast</li>
<li>match features using intensity consistent assume</li>
<li>if we want to farther get the pose of camera, in addition to, it needs to PnP or ICP after matching</li>
<li>if step three is to solver pose using BA based on the assume of consistent intensity, it is called direct method.</li>
</ol>
<h3>2018.3.18</h3>
<h4>Eigen</h4>
<p>这里是双精度，如果是单精度，只需要修改d为f即可</p>
<p>旋转矩阵（3*3）： Eigen::Matrix3d</p>
<p>旋转向量（3*1）：Eigen::AngleAxisd</p>
<p>欧拉角（3*1）：Eigen::Vector3d</p>
<p>四元数（4*1）：Eigen::Quaterniond</p>
<p>欧式变换矩阵（4*4）：Eigen::Isometry3d</p>
<p>仿射变换（4*4）：Eigen::Affine3d</p>
<p>射影变换（4*4）：Eigen::Projective3d</p>
<h4>schur消元</h4>
<p>对于线性方程</p>
<span class="math"><script type="math/tex; mode=display">H \Delta x = g
</script></span>
<p>求H矩阵的方法，其中 <span class="math"><script type="math/tex">\Delta x</script></span> 是 <span class="math"><script type="math/tex">\Delta x_{c}=\begin{bmatrix}
\xi_{1}, & \xi_{2}, & ..., & \xi_{m}
\end{bmatrix}^{T} \in \mathbb{R}^{6m}, \Delta x_{p}=\begin{bmatrix}
p_{1}, & p_{2}, & ..., & p_{n}
\end{bmatrix}^{T} \in \mathbb{R}^{3n}</script></span> 的统称，分别表示相机位姿和空间点的变量。</p>
<p>针对H矩阵的性质，我们将H矩阵分解成4块，<span class="math"><script type="math/tex">B, E, E^T, C</script></span>，该方法的精髓在于将一次性求解 <span class="math"><script type="math/tex">\Delta x, \Delta p</script></span> 变成了先求解 <span class="math"><script type="math/tex">\Delta x</script></span>，再求解 <span class="math"><script type="math/tex">\Delta p</script></span></p>
<span class="math"><script type="math/tex; mode=display">\begin{bmatrix}
B & E\\
E^T & C
\end{bmatrix}
\begin{bmatrix}
\Delta x_{c} \\
\Delta x_{p}
\end{bmatrix}=\begin{bmatrix}
\nu  \\
\omega
\end{bmatrix}
</script></span>
<p>我们将两边同时乘以 <span class="math"><script type="math/tex">\begin{bmatrix}
I & -EC^{-1}  \\
0 & I
\end{bmatrix}</script></span></p>
<span class="math"><script type="math/tex; mode=display">\begin{bmatrix}
I & -EC^{-1}  \\
0 & I
\end{bmatrix}
\begin{bmatrix}
B & E\\
E^T & C
\end{bmatrix}
\begin{bmatrix}
\Delta x_{c} \\
\Delta x_{p}
\end{bmatrix}=\begin{bmatrix}
I & -EC^{-1}  \\
0 & I
\end{bmatrix}
\begin{bmatrix}
\nu  \\
\omega
\end{bmatrix}
</script></span>
<span class="math"><script type="math/tex; mode=display">\begin{bmatrix}
B-EC^{-1}E^T & 0  \\
E^T & C
\end{bmatrix}
\begin{bmatrix}
\Delta x_{c} \\
\Delta x_{p}
\end{bmatrix}=\begin{bmatrix}
\nu-EC^{-1}\omega  \\
\omega
\end{bmatrix}
</script></span>
<p>所以，就变成了先求 <span class="math"><script type="math/tex">(B-EC^{-1}E^T)\Delta x_{c} = \nu - EC^{-1}\omega</script></span></p>
<p>之后将 <span class="math"><script type="math/tex">\Delta x_{c}</script></span> 带入到 <span class="math"><script type="math/tex">\Delta x_{p}=C^{-1}(\omega - E^T\Delta x_{c})</script></span> 即可</p>
<h2>2018.3.19</h2>
<h3>光流法的核心</h3>
<span class="math"><script type="math/tex; mode=display">A\Delta x = -b \\
\Delta x = -(A^TA)^{-1}A^Tb
</script></span>
<p>为啥要进行同时左乘一个 <span class="math"><script type="math/tex">A^T</script></span> ，因为左边不是一个方阵，所以没法直接移过来求逆，所以我们需要通过变换，将其变成方阵</p>
<h3>卡尔曼滤波的推导</h3>
<p><strong>复合高斯分布的概念</strong></p>
<p>假设随机变量 <span class="math"><script type="math/tex">x \sim N(u_{x},\Sigma_{xx})</script></span>，另一个变量y满足：</p>
<span class="math"><script type="math/tex; mode=display">y=Ax+b+w
</script></span>
<p>其中 <span class="math"><script type="math/tex">A, b</script></span> 为线性变量的系数矩阵和偏移量，<span class="math"><script type="math/tex">w</script></span>为噪声项，<span class="math"><script type="math/tex">w</script></span> 为零均值的高斯分布：<span class="math"><script type="math/tex">w \sim N(0, R)</script></span></p>
<p>y的高斯分布即为：</p>
<span class="math"><script type="math/tex; mode=display">p(y)=N(Au_{x}+b, R+A\Sigma_{xx}A^{T})
</script></span>
<p><strong>状态估计</strong></p>
<p>我们知道对于一个物体的状态估计应该分为预测和测量，其中预测主要是基于运动方程动模型得到的数据，测量主要是基于传感器等感知的数据</p>
<span class="math"><script type="math/tex; mode=display">x_{k}=f(x_{k-1},u_{k}) + w  \\
z_{k}=h(x_{k}) + v
</script></span>
<p>具体来说应该符合如下线性方程来描述：</p>
<span class="math"><script type="math/tex; mode=display">x_{k}=A_{k}x_{k-1}+u_{k}+w_{k}  \\
z_{k}=C_{k}x_{k}+v_{k}

</script></span>
<p>其中假设 <span class="math"><script type="math/tex">x_{k-1}, z_{k}, w_{k}, v_{k}</script></span> 是满足高斯分布，分别为 <span class="math"><script type="math/tex">x_{k-1} \sim N(\hat{x}_{k-1}, \hat{P}_{k-1}), w_{k} \sim N(0, R), v_{k} \sim N(0, Q)</script></span></p>
<p>为区分先验和后验，我们分别以 <span class="math"><script type="math/tex">\bar{x}_{k}</script></span> ，<span class="math"><script type="math/tex">\hat{x}_{k}</script></span> 表示，我们的目标是由k-1时刻的后验 <span class="math"><script type="math/tex">\hat{x}_{k-1}</script></span>，求k时刻的后验也即 <span class="math"><script type="math/tex">\hat{x}_{k}</script></span></p>
<span class="math"><script type="math/tex; mode=display">x_{k}\sim N(\bar{x}_{k},\bar P_{k}) \\
\bar{P}_{k}=A_{k}\hat{P}_{k-1}A^T_{k}+Q \\
\bar{x}_{k}=A_{k}\hat{x}_{k-1}+u_{k}\\
\\
z_{k} \sim N(C_{k}\bar{x}_{k}, C_{k}\bar{P}_{k-1}C^T_{k}+Q)</script></span>
<p>所以 <span class="math"><script type="math/tex">x_{k}</script></span> ， <span class="math"><script type="math/tex">z_{k}</script></span> 组成的联合高斯分布的形式为：</p>
<span class="math"><script type="math/tex; mode=display">P(x_{k},z_{k})=N(\begin{bmatrix}
u_{x} \\
u_{y}
\end{bmatrix},\begin{bmatrix}
\Sigma_{xx} & \Sigma_{xy} \\
\Sigma_{yx} & \Sigma_{yy}
\end{bmatrix})\\
=N(\begin{bmatrix}
\bar x_{k} \\
C_{k}\bar x_{k}
\end{bmatrix},\begin{bmatrix}
\bar P_{k} & \bar P_{k}C^T_{k} \\
C_{k}\bar{P}_{k} & C_{k}\bar{P}_{k-1}C^T_{k}+Q
\end{bmatrix})
</script></span>
<p>由贝叶斯公式 <span class="math"><script type="math/tex">p(x,y)=p(x|y)p(y)</script></span>，下文引自公式</p>
<span class="math"><script type="math/tex; mode=display">x_{k} \sim N(\hat{x}_{k}, \hat{P}_{k})=p(x|y)=p(x_{k}|z_{k})=N(u_{x}+\Sigma_{xx}\Sigma^{-1}_{xy}(y_{k}-u_{y}),\Sigma_{xx}-\Sigma_{xy}\Sigma^{-1}_{yy}\Sigma_{yx})
</script></span>
<p>由于 <span class="math"><script type="math/tex">x_{k-1} \sim N(\hat{x}_{k-1}, \hat{P}_{k-1})</script></span>，即 <span class="math"><script type="math/tex">x_{k} \sim N(\hat{x}_{k}, \hat{P}_{k})</script></span></p>
<span class="math"><script type="math/tex; mode=display">\hat x_{k}=\bar x_{k} + K_{k}(z_{k}-C_{k}\bar x_{k})\\
K_{k}=\bar P_{k}C^T_{k}(C_{k}\bar P_{k}C^T_{k}+R_{k})^{-1}\\
\hat P_{k}=(1-K_{k}C_{k})\bar P_{k}
</script></span></body>
</html>
